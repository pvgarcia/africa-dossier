<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cape Town → Kruger Safari → Victoria Falls — Garcia Gang Takes on Africa!</title>
<!-- Headings keep Playfair for the luxe vibe; body uses Aptos (with smart fallbacks) -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#E9E4DC; --paper:#F2EEE6; --ink:#3E3B34; --ink-soft:#6E6256; --line:#C7BEB0;
    --accent:#7D8B6A; --accent-2:#C6A664; --accent-3:#8DA3A6;
    --brown:#5a3e1b; --brown-dark:#3b2610; --shadow:0 18px 45px rgba(0,0,0,.12);
  }
  [data-theme="dark"]{
    --bg:#1f1b16; --paper:#2a251f; --ink:#efe9df; --ink-soft:#c8bcae; --line:#4a4136;
    --accent:#9cc07e; --accent-2:#d8b56a; --accent-3:#88b8bd; --brown:#f7e1c0; --brown-dark:#ffe8c8;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; 
    font-family: Aptos, "Segoe UI Variable", "Segoe UI", system-ui, -apple-system, Roboto, "Helvetica Neue", Arial, sans-serif;
    background:linear-gradient(180deg, var(--bg), #EFEAE2 50%, var(--bg));
    color:var(--ink);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    transition:background .3s ease,color .3s ease;
  }

  /* ===== HERO ===== */
  .hero{position:relative; height:72vh; min-height:520px; overflow:hidden; border-bottom:1px solid var(--line); margin-bottom:0;}
  .hero + *{margin-top:0 !important; padding-top:0 !important;}
  .slides{position:absolute; inset:0}
  .slide{position:absolute; inset:0; background-size:cover; background-position:center; opacity:0; transition:opacity .9s ease-in-out;}
  .slide.active{opacity:1}
  .slide::after{content:""; position:absolute; inset:0; background:linear-gradient(to bottom, rgba(0,0,0,.18), rgba(0,0,0,.10) 40%, rgba(0,0,0,.20));}

  .slide-caption{ position:absolute; left:20px; bottom:22px; z-index:2; background:rgba(255,255,255,.72); color:var(--brown);
    padding:12px 16px; border-radius:10px; border:1px solid rgba(0,0,0,.08); box-shadow:0 6px 20px rgba(0,0,0,.12); max-width:76vw; }
  .slide-caption h2{margin:0 0 6px 0; font-family:'Playfair Display',serif; font-weight:700; font-size:clamp(1rem,.7rem + 1.4vw,1.6rem)}
  .slide-caption a{color:var(--brown-dark); text-decoration:none; font-weight:700; border-bottom:1px dashed rgba(58,38,16,.35)}
  .slide-caption a:hover{border-bottom-color:rgba(58,38,16,.65)}
  .carousel-controls{position:absolute; left:50%; bottom:10px; transform:translateX(-50%); display:flex; gap:.45rem; z-index:3;}
  .dot{width:9px; height:9px; border-radius:50%; background:rgba(255,255,255,.55); border:1px solid rgba(0,0,0,.15); cursor:pointer}
  .dot.active{background:rgba(255,255,255,.95)}

  /* ===== NAV + LAYOUT ===== */
  .nav{position:sticky; top:0; z-index:9; backdrop-filter:saturate(140%) blur(6px); background:rgba(242,238,230,.86); border-bottom:1px solid var(--line)}
  .nav-inner{max-width:1200px; margin:0 auto; display:flex; gap:.6rem; align-items:center; padding:.6rem 1.25rem; overflow:auto}
  .nav a{color:var(--ink-soft); text-decoration:none; padding:.4rem .65rem; border-radius:10px; border:1px solid transparent; white-space:nowrap}
  .nav a.active, .nav a:hover{border-color:var(--line); color:var(--ink)}
  .nav .spacer{flex:1}
  .btn{font-family:inherit; font-weight:600; border:1px solid var(--line); background:var(--paper); padding:.45rem .7rem; border-radius:10px; cursor:pointer}
  .btn[aria-pressed="true"]{outline:2px solid var(--accent)}

  .wrap{max-width:1200px; margin:0 auto; padding:1.5rem 1.25rem 3rem; display:grid; gap:1.25rem}
  .card{background:var(--paper); border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow); padding:clamp(1rem,1.6vw,1.4rem)}
  h1,h2{font-family:'Playfair Display',serif}
  .section-title{margin:.2rem 0 1rem}
  .muted{color:var(--ink-soft)}
  table{border-collapse:collapse; width:100%} th,td{border:1px solid var(--line); padding:.65rem .6rem; text-align:left} th{background:#EEE7DC}
  [data-theme="dark"] th{background:#3a332b}
  .pill{display:inline-block; padding:.28rem .6rem; border:1px solid var(--line); border-radius:999px; background:#fbf9f5; color:var(--ink-soft); font-size:.85rem}
  .soft-card{background:#fbf9f5; border:1px solid var(--line); border-radius:14px; padding:1rem}
  [data-theme="dark"] .soft-card{background:#221e18}
  .mini{margin:.2rem 0 0} .mini li{margin:.25rem 0}

  /* ===== Equal-height 2×2 grid per destination ===== */
  .pair-grid{ display:grid; grid-template-columns: 1.2fr .8fr; grid-auto-rows: 1fr; gap: 1rem; }
  .pair-grid .cell{ display:flex; align-items:stretch; }
  .pair-grid .soft-card{ width:100%; display:flex; flex-direction:column; }

  /* ===== SCROLL ANIMATIONS ===== */
  .reveal{ opacity:0; transform:translateY(16px); transition:opacity .7s ease, transform .7s ease; }
  .reveal.show{ opacity:1; transform:none; }
  [data-anim="fade-up"]    { transform:translateY(16px); }
  [data-anim="fade-left"]  { transform:translateX(18px); }
  [data-anim="fade-right"] { transform:translateX(-18px); }
  [data-anim="zoom-in"]    { transform:scale(.96); }
  .reveal{ transition-delay: var(--d, 0s); }

  /* ===== FLIP CLOCK STYLES ===== */
  .flip-clock{ display:flex; align-items:center; gap:1rem; flex-wrap:wrap }
  .flip-clock .unit{ display:flex; flex-direction:column; align-items:center; }
  .flip-clock small{ color:var(--ink-soft); margin-top:.35rem; letter-spacing:.02em }

  /* 3D flip tiles with bevel + drop shadow */
  .flip{
    --tileGrad: linear-gradient(135deg,#fffaf0 0%,#f4efe6 60%,#efe6d9 100%);
    --edge: rgba(0,0,0,.12);
    position:relative; width:110px; height:72px; border-radius:14px;
    background:var(--tileGrad); border:1px solid var(--line);
    box-shadow: 0 2px 0 var(--edge) inset, 0 1px 0 #fff inset,
                0 8px 18px rgba(0,0,0,.10), 0 3px 6px rgba(0,0,0,.06);
    display:flex; align-items:center; justify-content:center; overflow:hidden;
    perspective:1000px; transform-style:preserve-3d;
    transition:transform .2s ease, box-shadow .2s ease;
    filter: drop-shadow(0 8px 16px rgba(0,0,0,.08));
  }
  .flip:hover{
    transform: translateY(-2px) scale(1.01);
    box-shadow: 0 2px 0 var(--edge) inset, 0 1px 0 #fff inset,
                0 14px 26px rgba(0,0,0,.14), 0 6px 12px rgba(0,0,0,.10);
  }

  /* inner split + highlights */
  .flip::before, .flip::after{
    content:""; position:absolute; left:0; right:0; height:50%; pointer-events:none;
  }
  .flip::before{ top:0;
    background:linear-gradient(to bottom, rgba(255,255,255,.55), rgba(255,255,255,0));
    border-bottom:1px solid rgba(0,0,0,.06);
  }
  .flip::after{ bottom:0;
    background:linear-gradient(to top, rgba(0,0,0,.08), rgba(0,0,0,0));
  }

  /* digits */
  .flip .curr, .flip .next{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
    font-weight:800; font-size:2.1rem; letter-spacing:.5px; color:var(--ink);
    text-shadow: 0 1px 0 rgba(255,255,255,.65);
    backface-visibility:hidden;
  }

  /* flip motion + lighting tweaks */
  .flip.animate .curr{ animation:fold .6s ease forwards; }
  .flip.animate .next{ animation:unfold .6s ease forwards; }
  @keyframes fold{ 0%{transform:rotateX(0)} 49%{filter:brightness(.85)} 100%{transform:rotateX(-90deg); filter:brightness(.75)} }
  @keyframes unfold{ 0%{transform:rotateX(90deg); filter:brightness(.75)} 51%{filter:brightness(.95)} 100%{transform:rotateX(0); filter:brightness(1)} }

  /* Back-to-top */
  .to-top{position:fixed; right:14px; bottom:18px; padding:.65rem .8rem; border-radius:12px; border:1px solid var(--line); background:#faf7f1; color:var(--ink); box-shadow:var(--shadow); cursor:pointer; display:none}
  .to-top.show{display:block}

  /* dark theme tuning */
  [data-theme="dark"] .flip{
    --tileGrad: linear-gradient(135deg,#2c251e,#1f1a15 60%,#1a1611);
    --edge: rgba(0,0,0,.5);
    box-shadow: 0 2px 0 rgba(255,255,255,.06) inset, 0 1px 0 rgba(255,255,255,.03) inset,
                0 10px 22px rgba(0,0,0,.5), 0 3px 10px rgba(0,0,0,.45);
    filter: drop-shadow(0 10px 20px rgba(0,0,0,.45));
  }
  [data-theme="dark"] .flip::before{
    background:linear-gradient(to bottom, rgba(255,255,255,.12), rgba(255,255,255,0));
    border-bottom-color:rgba(255,255,255,.06)
  }
  [data-theme="dark"] .flip::after{
    background:linear-gradient(to top, rgba(0,0,0,.4), rgba(0,0,0,0));
  }

  /* ===== FAMILY HUB WIDGETS ===== */
  .widgets{display:grid; grid-template-columns: repeat(12, 1fr); gap:1rem}
  .w{grid-column: span 6;}
  .w.small{grid-column: span 4;}
  .w.wide{grid-column: span 12;}
  .widget-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:.6rem}
  .widget-head h3{margin:0; font-family:'Playfair Display',serif}
  .input, select, textarea{width:100%; padding:.55rem .6rem; border:1px solid var(--line); border-radius:10px; background:var(--paper); color:var(--ink)}
  .row{display:flex; gap:.6rem; align-items:center}
  .row > *{flex:1}
  .list{display:grid; gap:.4rem}
  .chip{display:inline-flex; align-items:center; gap:.4rem; padding:.3rem .6rem; border:1px solid var(--line); border-radius:999px; background:#fff7ec}
  [data-theme="dark"] .chip{background:#2c251e}
  .progress{height:10px; background:#e7dfd3; border-radius:999px; overflow:hidden}
  .progress > span{display:block; height:100%; background:linear-gradient(90deg,var(--accent),var(--accent-2)); width:0}

  /* Checklist */
  .checklist{display:grid; gap:.4rem}
  .check{display:flex; align-items:center; gap:.5rem}
  .check input[type="checkbox"]{width:18px; height:18px}

  /* Gallery */
  .gallery{display:grid; grid-template-columns:repeat(6,1fr); gap:.5rem}
  .gallery img{width:100%; height:120px; object-fit:cover; border-radius:10px; cursor:pointer; border:1px solid var(--line)}
  .lightbox{position:fixed; inset:0; background:rgba(0,0,0,.7); display:none; align-items:center; justify-content:center; z-index:999}
  .lightbox.show{display:flex}
  .lightbox img{max-width:90vw; max-height:80vh; border-radius:12px; box-shadow:var(--shadow)}

  /* Print */
  @media print{ .hero,.nav,.to-top,.carousel-controls,.btn,.lightbox{display:none !important} .wrap{padding:0} .card{box-shadow:none; border:1px solid #ddd} }
  @media (max-width:1100px){ .w{grid-column: span 12;} .w.small{grid-column: span 6;} }
  @media (max-width:720px){ .hero{height:68vh} .gallery{grid-template-columns:repeat(3,1fr)} .flip{ width:88px; height:60px; border-radius:12px } .flip .curr,.flip .next{ font-size:1.8rem } }

  /* === Mobile friendly flip clock overrides === */
  .flip-clock{ gap:.8rem; }
  .flip{ width: clamp(64px, 22vw, 110px); height: clamp(44px, 14vw, 72px); border-radius:12px; }
  .flip .curr, .flip .next{ font-size: clamp(1.25rem, 7vw, 2.1rem); letter-spacing:.4px; }
  .flip-clock small{ font-size: clamp(.66rem, 2.3vw, .85rem); }
  @media (max-width: 480px){
    .flip-clock{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      column-gap:.75rem;
      row-gap:.75rem;
      align-items:start;
    }
    .flip-clock .unit{ align-items:center; }
  }
  @media (max-width: 360px){
    .flip-clock{ column-gap:.6rem; row-gap:.6rem; }
    .flip{ box-shadow:0 6px 12px rgba(0,0,0,.10); }
  }
</style>
</head>
<body>

<!-- ===== HERO ===== -->
<header class="hero" aria-label="Destination banners">
  <div class="slides" aria-hidden="true">
    <div class="slide active" style="background-image:url('images/cape-town-africa.jpg')">
      <div class="slide-caption reveal" data-anim="fade-up" style="--d:.1s">
        <h2>Cape Town — Table Mountain</h2>
        <a href="#family-hub">Plan with the Garcia Gang</a>
      </div>
    </div>
    <div class="slide" style="background-image:url('images/kruger-big5.jpg')">
      <div class="slide-caption reveal" data-anim="fade-up" style="--d:.1s">
        <h2>Kruger National Park — Big Five</h2>
        <a href="#highlights">Explore Highlights</a>
      </div>
    </div>
    <div class="slide" style="background-image:url('images/victoria-falls.jpg')">
      <div class="slide-caption reveal" data-anim="fade-up" style="--d:.1s">
        <h2>Victoria Falls — The Smoke That Thunders</h2>
        <a href="#family-hub">RSVP & Checklist</a>
      </div>
    </div>
  </div>
  <div class="carousel-controls" role="tablist" aria-label="Hero destination slides">
    <button class="dot active" role="tab" aria-selected="true" aria-label="Cape Town"></button>
    <button class="dot" role="tab" aria-selected="false" aria-label="Kruger"></button>
    <button class="dot" role="tab" aria-selected="false" aria-label="Victoria Falls"></button>
  </div>
</header>

<!-- ===== NAV ===== -->
<nav class="nav reveal" data-anim="fade-down" style="--d:.05s" aria-label="Section navigation">
  <div class="nav-inner">
    <a href="#glance">At a Glance</a>
    <a href="#flights">Flights & Costs</a>
    <a href="#highlights">Highlights</a>
    <a href="#family-hub">Family Hub</a>
    <a href="#packing">Packing</a>
    <a href="#budget">Budget</a>
    <a href="#health">Health & Visas</a>
    <a href="#gallery">Gallery</a>
    <a href="#contact">Contact</a>
    <span class="spacer"></span>
    <button id="themeToggle" class="btn" aria-pressed="false" title="Toggle theme">🌓 Theme</button>
    <button id="printBtn" class="btn" title="Print / Save PDF">🖨️ Print</button>
    <button id="shareBtn" class="btn" title="Share">🔗 Share</button>
  </div>
</nav>

<!-- ===== MAIN ===== -->
<main class="wrap">
  <!-- AT A GLANCE -->
  <section id="glance" class="card reveal" data-anim="fade-up" style="--d:.05s" aria-labelledby="glance-title">
    <h2 id="glance-title" class="section-title">At a Glance</h2>
    <p class="muted"><span class="pill reveal" data-anim="zoom-in" style="--d:.12s">9 nights</span> <span class="pill reveal" data-anim="zoom-in" style="--d:.18s">Family Fun</span> <span class="pill reveal" data-anim="zoom-in" style="--d:.24s">Garcia Gang</span></p>

    <div class="row" style="margin:.6rem 0 1rem">
      <div class="muted" style="flex:0 0 auto; min-width:170px">Trip start date:</div>
      <div class="pill" style="flex:0 0 auto; padding:.6rem 1rem; font-weight:600">June 1, 2027</div>

      <!-- Flip Clock -->
      <div id="flipClock" class="flip-clock" aria-live="polite">
        <div class="unit" data-label="Days">
          <div class="flip"><span class="curr">000</span><span class="next">000</span></div>
          <small>Days</small>
        </div>
        <div class="unit" data-label="Hours">
          <div class="flip"><span class="curr">00</span><span class="next">00</span></div>
          <small>Hours</small>
        </div>
        <div class="unit" data-label="Minutes">
          <div class="flip"><span class="curr">00</span><span class="next">00</span></div>
          <small>Minutes</small>
        </div>
        <div class="unit" data-label="Seconds">
          <div class="flip"><span class="curr">00</span><span class="next">00</span></div>
          <small>Seconds</small>
        </div>
      </div>
    </div>

<table class="reveal" data-anim="fade-up" style="--d:.12s">
  <thead><tr><th>Days</th><th>Where</th><th>Key Notes</th></tr></thead>
  <tbody>
    <tr>
      <td>1–3</td>
      <td><a class="maplink" target="_blank" rel="noopener noreferrer" href="https://www.google.com/maps/place/Cape+Town,+South+Africa">Cape Town</a></td>
      <td>Table Mountain, Robben Island, Cape of Good Hope, Penguins</td>
    </tr>
    <tr>
      <td>4–6</td>
      <td><a class="maplink" target="_blank" rel="noopener noreferrer" href="https://www.google.com/maps/place/Kruger+National+Park">Kruger Safari</a></td>
      <td>Big Five game drives, luxury lodge, all meals</td>
    </tr>
    <tr>
      <td>7–8</td>
      <td><a class="maplink" target="_blank" rel="noopener noreferrer" href="https://www.google.com/maps/place/Victoria+Falls">Victoria Falls</a></td>
      <td>Guided Falls tour, Zambezi sunset cruise, helicopter optional</td>
    </tr>
    <tr>
      <td>9</td>
      <td>Return</td>
      <td>Fly to Johannesburg, connect to Denver</td>
    </tr>
  </tbody>
</table>


  <!-- FLIGHTS & COSTS -->
  <section id="flights" class="card reveal" data-anim="fade-up" style="--d:.08s" aria-labelledby="flights-title">
    <h2 id="flights-title" class="section-title">Flights & Costs</h2>
    <table class="reveal" data-anim="fade-up" style="--d:.16s" aria-describedby="flights-title">
      <thead><tr><th>Route</th><th>Estimated Cost (USD, Economy)</th></tr></thead>
      <tbody>
        <tr><td>Denver → Cape Town</td><td>$1,400</td></tr>
        <tr><td>Victoria Falls → Denver (via Johannesburg)</td><td>$1,500</td></tr>
        <tr><td>Cape Town → Kruger</td><td>Included in internal flight budget</td></tr>
        <tr><td>Kruger → Victoria Falls (via Johannesburg)</td><td>~$700 total internal flights</td></tr>
      </tbody>
    </table>
    <p class="muted reveal" data-anim="fade-up" style="--d:.22s"><em>Estimated Mid Level Total: $4,850–$6,500 per person (incl. flights)</em></p>
  </section>

  <!-- HIGHLIGHTS -->
  <section id="highlights" class="card" aria-labelledby="highlights-title">
    <h2 id="highlights-title" class="section-title reveal" data-anim="fade-up">Highlights & Why They’re Famous</h2>

    <!-- CAPE TOWN -->
    <div id="cape-town-highlights" style="scroll-margin-top:80px; margin-bottom:1.2rem">
      <h3 class="reveal" data-anim="fade-right">🇿🇦 Cape Town</h3>
      <div class="pair-grid">
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.06s">
          <strong>Why it’s famous</strong>
          <ul class="mini">
            <li><em>Table Mountain</em> one of the New7Wonders of Nature, framing the city with epic views.</li>
            <li><em>Robben Island</em> Mandela’s prison; living museum of South Africa’s triumph.</li>
            <li><em>Cape Peninsula</em> Cape of Good Hope and Boulders Beach penguins.</li>
            <li><em>Food & Wine</em> world class restaurants; easy Winelands access.</li>
          </ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.12s">
          <strong>Perfect Day (Mini Itinerary)</strong>
          <ul class="mini">
            <li>Morning Cable car up Table Mountain; coffee with views.</li>
            <li>Midday Bo Kaap walk; Malay lunch.</li>
            <li>Afternoon Kirstenbosch or V&A Waterfront.</li>
            <li>Evening Sundowners on Signal Hill; dinner on Waterfront.</li>
          </ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.18s">
          <strong>Top 3 Must Dos</strong>
          <ol class="mini">
            <li>Sunrise or sunset on Table Mountain or Lion’s Head.</li>
            <li>Cape Peninsula circuit: Chapman’s Peak to Cape Point to Penguins.</li>
            <li>Robben Island tour with ex political prisoner guides.</li>
          </ol>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.24s">
          <strong>Insider Tips</strong>
          <ul class="mini">
            <li>Book Robben Island early; weather can shift sailings.</li>
            <li>Use Uber or a driver for Peninsula day; parking is tight.</li>
          </ul>
        </div></div>
      </div>
    </div>

    <hr style="border:none; border-top:1px solid var(--line); margin:1.2rem 0" />

    <!-- KRUGER -->
    <div id="kruger-highlights" style="scroll-margin-top:80px; margin-bottom:1.2rem">
      <h3 class="reveal" data-anim="fade-right">🦁 Kruger Safari</h3>
      <div class="pair-grid">
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.06s">
          <strong>Why it’s famous</strong>
          <ul class="mini">
            <li><em>Big Five</em> density with reliable sightings (private reserves like Sabi Sands).</li>
            <li><em>Guiding & tracking</em> traditions for close up, ethical encounters.</li>
            <li><em>All inclusive lodges</em> twice daily drives, great food, stargazing.</li>
          </ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.12s">
          <strong>Perfect Day (Mini Itinerary)</strong>
          <ul class="mini">
            <li>Pre dawn Coffee and rusks; morning drive.</li>
            <li>Late Morning Brunch and siesta or pool.</li>
            <li>Afternoon High tea; evening drive.</li>
            <li>Night Dinner by fire; Southern Cross overhead.</li>
          </ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.18s">
          <strong>Top 3 Must Dos</strong>
          <ol class="mini">
            <li>Sunrise drive for predators and elephants.</li>
            <li>Evening drive plus bush dinner under stars.</li>
            <li>Optional bush walk with armed ranger.</li>
          </ol>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.24s">
          <strong>Insider Tips</strong>
          <ul class="mini">
            <li>June is dry season start: cooler mornings; pack layers.</li>
            <li>Message lodge to confirm bush strip timings.</li>
          </ul>
        </div></div>
      </div>
    </div>

    <hr style="border:none; border-top:1px solid var(--line); margin:1.2rem 0" />

    <!-- VICTORIA FALLS -->
    <div id="victoria-falls-highlights" style="scroll-margin-top:80px">
      <h3 class="reveal" data-anim="fade-right">🌊 Victoria Falls</h3>
      <div class="pair-grid">
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.06s">
          <strong>Why it’s famous</strong>
          <ul class="mini">
            <li>Among the largest waterfalls by width times height on Earth.</li>
            <li><em>Mosi oa Tunya</em> The Smoke That Thunders mist visible for miles.</li>
            <li>Adventure hub: cruises, heli flips, seasonal Devil’s Pool.</li>
          </ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.12s">
          <strong>Perfect Day (Mini Itinerary)</strong>
          <ul class="mini">
            <li>Morning Falls walk on the Zimbabwe side before crowds.</li>
            <li>Midday Market browse or café stop in town.</li>
            <li>Afternoon Optional helicopter; relax at hotel.</li>
            <li>Evening Zambezi sunset cruise; dinner with local cuisine.</li>
          </ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.18s">
          <strong>Top 3 Must Dos</strong>
          <ol class="mini">
            <li>Guided Falls walk with a raincoat for spray.</li>
            <li>Sunset cruise on the Zambezi River.</li>
            <li>Helicopter Flight of Angels.</li>
          </ol>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-up" style="--d:.24s">
          <strong>Insider Tips</strong>
          <ul class="mini">
            <li>Park fee is per entry so plan one focused visit.</li>
            <li>Zim for classic viewpoints; Zam for Devil’s Pool in dry season.</li>
          </ul>
        </div></div>
      </div>
    </div>
  </section>

  <!-- ===== FAMILY HUB ===== -->
  <section id="family-hub" class="card reveal" data-anim="fade-up" aria-labelledby="hub-title">
    <div class="widget-head">
      <h2 id="hub-title" class="section-title">Family Hub — Garcia Gang</h2>
      <div class="pill" id="progressText">Planning Progress: 0%</div>
    </div>

    <div class="widgets">
      <!-- RSVP & Roles -->
      <div class="w" id="rsvpCard">
        <div class="soft-card">
          <div class="widget-head"><h3>RSVP & Roles</h3>
            <button class="btn" id="addPersonBtn">＋ Add Person</button></div>
          <div class="list" id="peopleList" aria-live="polite"></div>
        </div>
      </div>

      <!-- Task Board -->
      <div class="w" id="tasksCard">
        <div class="soft-card">
          <div class="widget-head"><h3>Task Board</h3>
            <div class="row"><input id="taskInput" class="input" placeholder="Add a task e.g., Book Robben Island" /><button class="btn" id="addTaskBtn">Add</button></div></div>
          <div class="list" id="taskList"></div>
          <div class="progress" style="margin-top:.6rem"><span id="taskProgress"></span></div>
        </div>
      </div>

      <!-- Notes -->
      <div class="w wide" id="notesCard">
        <div class="soft-card">
          <div class="widget-head"><h3>Shared Notes</h3>
            <button class="btn" id="clearNotes">Clear</button></div>
          <textarea id="notes" rows="5" placeholder="Drop any ideas, links, preferences here…"></textarea>
        </div>
      </div>
    </div>
  </section>

  <!-- PACKING CHECKLIST -->
  <section id="packing" class="card reveal" data-anim="fade-up" aria-labelledby="pack-title">
    <h2 id="pack-title" class="section-title">Packing Checklist</h2>
    <div class="widgets">
      <div class="w small">
        <div class="soft-card">
          <div class="widget-head"><h3>Essentials</h3></div>
          <div class="checklist" id="packEssentials"></div>
        </div>
      </div>
      <div class="w small">
        <div class="soft-card">
          <div class="widget-head"><h3>Safari</h3></div>
          <div class="checklist" id="packSafari"></div>
        </div>
      </div>
      <div class="w small">
        <div class="soft-card">
          <div class="widget-head"><h3>Falls & Water</h3></div>
          <div class="checklist" id="packFalls"></div>
        </div>
      </div>
      <div class="w small">
        <div class="soft-card">
          <div class="widget-head"><h3>Med/Docs</h3></div>
          <div class="checklist" id="packDocs"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- BUDGET -->
  <section id="budget" class="card reveal" data-anim="fade-up" aria-labelledby="budget-title">
    <div class="widget-head">
      <h2 id="budget-title" class="section-title">Budget Planner</h2>
      <div class="row" style="max-width:520px">
        <input id="budgetItem" class="input" placeholder="Item e.g., Robben Island tickets" />
        <input id="budgetAmt" class="input" type="number" min="0" step="0.01" placeholder="Amount USD" />
        <button class="btn" id="addBudget">Add</button>
      </div>
    </div>
    <table aria-label="Budget table">
      <thead><tr><th>Item</th><th style="width:160px">Amount</th><th style="width:120px">Actions</th></tr></thead>
      <tbody id="budgetBody"></tbody>
      <tfoot><tr><th>Total</th><th id="budgetTotal">$0.00</th><th></th></tr></tfoot>
    </table>
  </section>

  <!-- HEALTH & VISAS U.S. Citizens -->
  <section id="health" class="card reveal" data-anim="fade-up" aria-labelledby="health-title">
    <h2 id="health-title" class="section-title">Health & Entry Info U.S. Citizens</h2>
    <div class="widgets">
      <div class="w wide">
        <div class="soft-card">
          <div class="widget-head"><h3>Vaccines & Health</h3></div>
          <ul class="mini">
            <li><strong>Yellow fever:</strong> <em>Not required</em> when arriving from the U.S. or South Africa. Required only if you arrive from a yellow fever risk country.</li>
            <li><strong>Malaria:</strong> Recommended prophylaxis for <em>Kruger</em> and <em>Victoria Falls</em>. Ask your clinician about atovaquone proguanil, doxycycline, or mefloquine.</li>
            <li><strong>Other shots:</strong> CDC commonly advises <em>Hepatitis A</em> and <em>Typhoid</em> for most travelers; keep routine vaccines current.</li>
            <li><strong>Water & food:</strong> Prefer bottled or treated water; avoid raw street foods; pack oral rehydration plus basic meds.</li>
            <li><strong>References:</strong> <a href="https://wwwnc.cdc.gov/travel" target="_blank" rel="noopener">CDC Traveler’s Health</a></li>
          </ul>
        </div>
      </div>

      <div class="w">
        <div class="soft-card">
          <div class="widget-head"><h3>Visas South Africa</h3></div>
          <ul class="mini">
            <li>U.S. citizens: <em>Visa exempt up to 90 days</em> for tourism.</li>
            <li>Passport validity: at least 30 days beyond departure; keep <em>2 blank pages</em>.</li>
            <li>Links: <a href="https://www.dha.gov.za/" target="_blank" rel="noopener">Dept. of Home Affairs SA</a> · <a href="https://www.sa-embassy.org/" target="_blank" rel="noopener">South African Embassy U.S.</a></li>
          </ul>
        </div>
      </div>

      <div class="w">
        <div class="soft-card">
          <div class="widget-head"><h3>Visas Zimbabwe & Zambia</h3></div>
          <ul class="mini">
            <li><strong>Zimbabwe:</strong> Visa required; typically available on arrival. Single or double entry options.</li>
            <li><strong>Zambia if crossing the bridge:</strong> Visa required; consider <em>KAZA Univisa</em> about $50 covering both countries up to 30 days.</li>
            <li>Links: <a href="https://zimbabwe-embassy.us/" target="_blank" rel="noopener">Zimbabwe Embassy U.S.</a> · <a href="https://www.evisa.gov.zw/" target="_blank" rel="noopener">Zimbabwe eVisa</a> · <a href="https://eservices.zambiaimmigration.gov.zm/" target="_blank" rel="noopener">Zambia eServices</a> · <a href="https://zm.usembassy.gov/" target="_blank" rel="noopener">U.S. Embassy Zambia</a></li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- GALLERY -->
  <section id="gallery" class="card reveal" data-anim="fade-up" aria-labelledby="gallery-title">
    <div class="widget-head"><h2 id="gallery-title" class="section-title">Inspiration Gallery</h2>
      <div class="muted">Click any image to view larger</div></div>
    <div class="gallery" id="galleryGrid">
      <img src="images/cape-town-africa.jpg" alt="Cape Town" />
      <img src="images/kruger-big5.jpg" alt="Kruger" />
      <img src="images/victoria-falls.jpg" alt="Victoria Falls" />
      <img src="images/bo-kaap.jpg" alt="Bo Kaap" />
      <img src="images/penguins.jpg" alt="Boulders Beach Penguins" />
      <img src="images/zambezi-sunset.jpg" alt="Zambezi Sunset" />
    </div>
    <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Image viewer">
      <img id="lightboxImg" alt="" />
    </div>
  </section>

</main>

<button class="to-top" aria-label="Back to top">▲ Top</button>

<script>
  // ===== Utilities =====
  const store = {
    get: (k, fallback) => { try { return JSON.parse(localStorage.getItem(k)) ?? fallback } catch { return fallback } },
    set: (k, v) => localStorage.setItem(k, JSON.stringify(v)),
    del: (k) => localStorage.removeItem(k)
  };
  const K = {
    theme:'garcia.theme',
    people:'garcia.people',
    tasks:'garcia.tasks',
    notes:'garcia.notes',
    budget:'garcia.budget',
    packing:'garcia.packing'
  };

  // Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', e=>{
      const href=a.getAttribute('href');
      if(href.length>1){ e.preventDefault(); const target=document.querySelector(href); if(target) target.scrollIntoView({behavior:'smooth'}); }
    });
  });

  // Active link highlighting
  const sections=[...document.querySelectorAll('main section')];
  const navLinks=[...document.querySelectorAll('.nav a')];
  function onScroll(){
    const y=window.scrollY+90; let id=null;
    sections.forEach(s=>{ const r=s.getBoundingClientRect(); const top=window.scrollY+r.top; if(y>=top && y<top+r.height) id=s.id; });
    navLinks.forEach(l=> l.classList.toggle('active', l.getAttribute('href')==='#'+id));
  }
  document.addEventListener('scroll', onScroll, {passive:true}); onScroll();

  // Back-to-top
  const toTop=document.querySelector('.to-top');
  function toggleTop(){ toTop.classList.toggle('show', window.scrollY>500); }
  document.addEventListener('scroll', toggleTop, {passive:true});
  toTop.addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

  // HERO CAROUSEL
  (function(){
    const slides=[...document.querySelectorAll('.slide')];
    const dots=[...document.querySelectorAll('.dot')];
    if(!slides.length) return;
    let i=0, timer=null;
    function setActive(n){
      slides.forEach((s,idx)=>s.classList.toggle('active', idx===n));
      dots.forEach((d,idx)=>{ d.classList.toggle('active', idx===n); d.setAttribute('aria-selected', idx===n ? 'true' : 'false'); });
      i=n;
    }
    function next(){ setActive((i+1)%slides.length); }
    function start(){ timer=setInterval(next, 5200); }
    function stop(){ if(timer) clearInterval(timer); }
    dots.forEach((d,idx)=> d.addEventListener('click', ()=>{ stop(); setActive(idx); start(); }));
    const hero=document.querySelector('.hero');
    hero.addEventListener('mouseenter', stop); hero.addEventListener('mouseleave', start);
    start();
  })();

  // ===== SCROLL REVEAL OBSERVER =====
  (function(){
    const items=[...document.querySelectorAll('.reveal')];
    if(!('IntersectionObserver' in window)||!items.length) { items.forEach(el=>el.classList.add('show')); return; }
    const io=new IntersectionObserver((entries,obs)=>{
      entries.forEach(entry=>{ if(entry.isIntersecting){ entry.target.classList.add('show'); obs.unobserve(entry.target);} });
    }, {root:null, rootMargin:'0px 0px -10% 0px', threshold:0.12});
    items.forEach(el=> io.observe(el));
  })();

  // ===== THEME TOGGLE & SHARE & PRINT =====
  const themeToggle=document.getElementById('themeToggle');
  const shareBtn=document.getElementById('shareBtn');
  const printBtn=document.getElementById('printBtn');
  function applyTheme(t){ document.documentElement.setAttribute('data-theme', t); themeToggle.setAttribute('aria-pressed', t==='dark'); store.set(K.theme, t); }
  applyTheme(store.get(K.theme,'light'));
  themeToggle.addEventListener('click', ()=>{ const t=document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark'; applyTheme(t); });
  shareBtn.addEventListener('click', async ()=>{
    const data={ title:document.title, text:'Garcia Gang trip dossier', url:location.href };
    try{ if(navigator.share){ await navigator.share(data); } else { await navigator.clipboard.writeText(location.href); alert('Link copied to clipboard!'); } }catch(e){ console.warn(e); }
  });
  printBtn.addEventListener('click', ()=> window.print());

  // ===== FLIP CLOCK COUNTDOWN Auto to June 1, 2027 =====
  const TARGET_DATE = new Date(2027, 5, 1, 0, 0, 0); // months 0-indexed
  const flipClock = document.getElementById('flipClock');
  function pad(n, len){ return String(n).padStart(len, '0'); }
  function diffParts(){
    const now = new Date();
    let ms = Math.max(0, TARGET_DATE - now);
    const s = Math.floor(ms / 1000);
    const days = Math.floor(s / 86400);
    const hours = Math.floor((s % 86400) / 3600);
    const minutes = Math.floor((s % 3600) / 60);
    const seconds = s % 60;
    return { days, hours, minutes, seconds };
  }
  const refs = [...flipClock.querySelectorAll('.unit')].map((u,i)=>({
    flip: u.querySelector('.flip'),
    curr: u.querySelector('.curr'),
    next: u.querySelector('.next'),
    len: i===0 ? 3 : 2,
    name: ['days','hours','minutes','seconds'][i]
  }));
  let last = {};
  function tick(){
    const d = diffParts();
    refs.forEach(ref=>{
      const val = d[ref.name];
      const text = pad(val, ref.len);
      if(last[ref.name] !== text){
        ref.next.textContent = text;
        ref.flip.classList.remove('animate');
        void ref.flip.offsetWidth; // restart animation
        ref.flip.classList.add('animate');
        setTimeout(()=>{ ref.curr.textContent = text; }, 580);
        last[ref.name] = text;
      }
    });
  }
  tick();
  setInterval(tick, 1000);

  // Abbreviate labels on very small screens, restore on larger
  const labelMap = { Days: 'Days', Hours: 'Hours', Minutes: 'Min', Seconds: 'Sec' };
  const shortMap = { Days: 'D', Hours: 'H', Minutes: 'M', Seconds: 'S' };
  const units = [...document.querySelectorAll('#flipClock .unit')];
  function relabel(){
    const useShort = window.matchMedia('(max-width: 420px)').matches;
    units.forEach(u=>{
      const sm = u.querySelector('small');
      if(!sm) return;
      const key = sm.textContent.trim();
      sm.textContent = useShort ? (shortMap[key] || sm.textContent) : (labelMap[key] || sm.textContent);
    });
  }
  relabel();
  window.addEventListener('resize', relabel);

// ===== FAMILY HUB: RSVP & ROLES =====
const peopleList = document.getElementById('peopleList');
const addPersonBtn = document.getElementById('addPersonBtn');

const APP_VERSION = 2;                 // bump when you change defaults
const VERSION_KEY = 'garcia.version';

let people = store.get(K.people, [
  {name:'Primrose', status:'🤩 In', role:'Trip Captain'},
  {name:'Shae',     status:'👍 In', role:'Showing up :)'},
  {name:'Tracy',    status:'🍸 In', role:'Food & Vibes'},
  {name:'LeRoy',    status:'👍 In', role:'Food & Vibes'},
]);

// One-time migration to update or seed people, then mark version
(function migratePeople(){
  const current = store.get(VERSION_KEY, 0);
  if (current >= APP_VERSION) return;

  const byName = new Map(people.map(p => [String(p.name||'').toLowerCase(), p]));
  let changed = false;

  function ensure(name, status, role){
    const key = name.toLowerCase();
    if (!byName.has(key)) { people.push({name, status, role}); changed = true; }
  }
  ensure('Primrose','🤩 In','Trip Captain');
  ensure('Shae','👍 In','Showing up :)');
  ensure('Tracy','🍸 In','Food & Vibes');
  ensure('LeRoy','👍 In','Food & Vibes');

  // Normalize any stored variants of Trip Captain to include the emoji
  people = people.map(p => {
    const role = String(p.role||'').trim();
    const isCaptain = /(^|\s)trip\s*captain$/i.test(role.replace(/^([\p{Extended_Pictographic}])+(\s)*/u,''));
    return isCaptain && !role.includes('🧭') ? {...p, role:'🧭 Trip Captain'} : p;
  });

  if (changed) store.set(K.people, people);
  store.set(VERSION_KEY, APP_VERSION);
})();

function renderPeople(){
  peopleList.innerHTML = '';
  people.forEach((p, idx) => {
    const row = document.createElement('div');
    row.className = 'row';

    // Display with emoji if role is Trip Captain
    const isCaptain = /trip\s*captain/i.test(String(p.role||''));
    const roleDisplay = isCaptain ? '🧭 Trip Captain' : (p.role || '');

    row.innerHTML = `
      <input class="input" value="${p.name}" aria-label="name" />
      <select class="input" aria-label="status">
        <option ${p.status==='🤩 In'?'selected':''}>🤩 In</option>
        <option ${p.status==='🍸 In'?'selected':''}>🍸 In</option>
        <option ${p.status==='👍 In'?'selected':''}>👍 In</option>
        <option ${p.status==='🤔 Maybe'?'selected':''}>🤔 Maybe</option>
        <option ${p.status==='❌ Out'?'selected':''}>❌ Out</option>
      </select>
      <input class="input" value="${roleDisplay}" placeholder="Role e.g., Flights" aria-label="role" />
      <button class="btn" aria-label="Delete" data-del>🗑️</button>`;

    row.querySelector('[data-del]').addEventListener('click', () => {
      people.splice(idx, 1);
      savePeople();
      renderPeople();
      updateProgress();
    });

    row.querySelectorAll('input,select').forEach((el) =>
      el.addEventListener('input', () => {
        const [nameEl, statusEl, roleEl] = row.querySelectorAll('input,select');
        let roleVal = roleEl.value.trim();

        // Normalize any typed Trip Captain to the emoji form
        const plain = roleVal.replace(/^([\p{Extended_Pictographic}])+(\s)*/u,'').trim();
        if (/^trip\s*captain$/i.test(plain)) roleVal = '🧭 Trip Captain';

        people[idx] = { 
          name: nameEl.value.trim(), 
          status: statusEl.value, 
          role: roleVal 
        };
        savePeople();
        updateProgress();
      })
    );

    peopleList.appendChild(row);
  });
}

function savePeople(){ store.set(K.people, people); }
addPersonBtn.addEventListener('click', () => {
  people.push({name:'', status:'🤔 Maybe', role:''});
  savePeople();
  renderPeople();
});
renderPeople();

// ===== TASK BOARD =====
const taskInput = document.getElementById('taskInput');
const addTaskBtn = document.getElementById('addTaskBtn');
const taskList = document.getElementById('taskList');
const taskProgress = document.getElementById('taskProgress');

const DEFAULT_TASKS = [
  {text:'Confirm number of people going', done:false},
  {text:'Book flights', done:false},
  {text:'Book vacation package', done:false},
  {text:'Confirm Cape Town Excursions', done:false},
  {text:'Confirm Zambezi cruise', done:false},
];

let tasks = store.get(K.tasks, DEFAULT_TASKS);

// One-time migration to the new defaults
const TASKS_VERSION_KEY = 'garcia.tasks.version';
const TASKS_VERSION = 1;

(function migrateTasks(){
  const current = store.get(TASKS_VERSION_KEY, 0);
  if (current >= TASKS_VERSION) return;

  const wanted = DEFAULT_TASKS.map(t => t.text.toLowerCase());
  const doneMap = new Map(
    (Array.isArray(tasks) ? tasks : []).map(t => [String(t.text || '').toLowerCase(), !!t.done])
  );

  // Keep done state on matching items, keep user-added extras
  const nextDefaults = DEFAULT_TASKS.map(t => ({
    text: t.text,
    done: doneMap.get(t.text.toLowerCase()) || false
  }));
  const extras = (Array.isArray(tasks) ? tasks : []).filter(
    t => !wanted.includes(String(t.text || '').toLowerCase())
  );

  tasks = [...nextDefaults, ...extras];

  store.set(K.tasks, tasks);
  store.set(TASKS_VERSION_KEY, TASKS_VERSION);
})();

function renderTasks(){
  taskList.innerHTML = '';
  tasks.forEach((t, idx) => {
    const el = document.createElement('div'); 
    el.className = 'check';
    el.innerHTML = `
      <input type="checkbox" ${t.done ? 'checked' : ''} aria-label="toggle task">
      <input class="input" value="${t.text}" aria-label="task text">
      <button class="btn" aria-label="Delete">🗑️</button>`;
    const [cb, txt, del] = el.querySelectorAll('input,button');

    cb.addEventListener('change', () => {
      tasks[idx].done = cb.checked;
      saveTasks(); 
      updateTaskProgress(); 
      updateProgress();
    });
    txt.addEventListener('input', () => {
      tasks[idx].text = txt.value;
      saveTasks();
    });
    del.addEventListener('click', () => {
      tasks.splice(idx, 1);
      saveTasks(); 
      renderTasks(); 
      updateTaskProgress(); 
      updateProgress();
    });

    taskList.appendChild(el);
  });
  updateTaskProgress();
}

function saveTasks(){ store.set(K.tasks, tasks); }

addTaskBtn.addEventListener('click', () => {
  if (taskInput.value.trim()){
    tasks.unshift({text: taskInput.value.trim(), done:false});
    taskInput.value = '';
    saveTasks(); 
    renderTasks(); 
    updateTaskProgress(); 
    updateProgress();
  }
});

function updateTaskProgress(){
  const total = tasks.length || 1;
  const done = tasks.filter(t => t.done).length;
  const pct = Math.round(done / total * 100);
  taskProgress.style.width = pct + '%';
}

renderTasks();


  // ===== SHARED NOTES =====
  const notes=document.getElementById('notes');
  const clearNotes=document.getElementById('clearNotes');
  notes.value=store.get(K.notes,'');
  notes.addEventListener('input', ()=> store.set(K.notes, notes.value));
  clearNotes.addEventListener('click', ()=>{ if(confirm('Clear all notes?')){ notes.value=''; store.set(K.notes, ''); } });

  // ===== PACKING CHECKLIST =====
  const checklistData={
    packEssentials:[
      'Passport + visas','Credit cards / USD cash','Travel insurance','Universal adapter','Phone + charger','Sunscreen SPF 30+','Sunglasses','Comfortable shoes'
    ],
    packSafari:[
      'Neutral layers khaki or olive','Light down jacket','Wide brim hat','Binoculars','Camera + batteries','Insect repellent','Small torch or headlamp'
    ],
    packFalls:[
      'Light rain jacket','Quick dry clothes','Waterproof pouch','Sandals or water shoes','Spare SD cards'
    ],
    packDocs:[
      'Malaria meds','Prescription meds','Copies of docs','Emergency contacts','Lodge confirmations'
    ]
  };
  const packingState=store.get('garcia.packing', {});
  function renderChecklist(id, items){
    const box=document.getElementById(id);
    box.innerHTML='';
    items.forEach((label, i)=>{
      const key=id+':'+i;
      const wrap=document.createElement('label'); wrap.className='check';
      wrap.innerHTML=`<input type="checkbox" ${packingState[key]?'checked':''}><span>${label}</span>`;
      const cb=wrap.querySelector('input');
      cb.addEventListener('change',()=>{ packingState[key]=cb.checked; store.set('garcia.packing', packingState); updateProgress(); });
      box.appendChild(wrap);
    });
  }
  renderChecklist('packEssentials', checklistData.packEssentials);
  renderChecklist('packSafari', checklistData.packSafari);
  renderChecklist('packFalls', checklistData.packFalls);
  renderChecklist('packDocs', checklistData.packDocs);

  // ===== BUDGET =====
  const budgetBody=document.getElementById('budgetBody');
  const budgetTotal=document.getElementById('budgetTotal');
  const addBudget=document.getElementById('addBudget');
  const budgetItem=document.getElementById('budgetItem');
  const budgetAmt=document.getElementById('budgetAmt');
  let budget=store.get(K.budget, [
    {item:'Flights per person est.', amount:4850},
    {item:'Robben Island tickets 2', amount:60},
    {item:'Zambezi sunset cruise 2', amount:120}
  ]);
  function renderBudget(){
    budgetBody.innerHTML='';
    budget.forEach((b,idx)=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td><input class="input" value="${b.item}"></td><td><input class="input" type="number" min="0" step="0.01" value="${b.amount}"></td><td><button class="btn" aria-label="Delete">🗑️</button></td>`;
      const [itemEl, amtEl, del]=tr.querySelectorAll('input,button');
      const sync=()=>{ budget[idx].item=itemEl.value; budget[idx].amount=parseFloat(amtEl.value||0); saveBudget(); updateBudgetTotal(); };
      itemEl.addEventListener('input', sync); amtEl.addEventListener('input', sync);
      del.addEventListener('click', ()=>{ budget.splice(idx,1); saveBudget(); renderBudget(); updateBudgetTotal(); updateProgress(); });
      budgetBody.appendChild(tr);
    });
    updateBudgetTotal();
  }
  function saveBudget(){ store.set(K.budget, budget); }
  function updateBudgetTotal(){ const total=budget.reduce((s,b)=> s + (parseFloat(b.amount)||0),0); budgetTotal.textContent = new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(total); }
  addBudget.addEventListener('click', ()=>{
    const item=budgetItem.value.trim(); const amt=parseFloat(budgetAmt.value);
    if(!item||isNaN(amt)) return; budget.push({item, amount:amt}); budgetItem.value=''; budgetAmt.value=''; saveBudget(); renderBudget(); updateBudgetTotal(); updateProgress();
  });
  renderBudget();

  // ===== GALLERY LIGHTBOX =====
  const gallery=document.getElementById('galleryGrid');
  const lightbox=document.getElementById('lightbox');
  const lightboxImg=document.getElementById('lightboxImg');
  gallery.addEventListener('click', (e)=>{
    const img=e.target.closest('img');
    if(!img) return; lightboxImg.src=img.src; lightboxImg.alt=img.alt; lightbox.classList.add('show');
  });
  lightbox.addEventListener('click', ()=> lightbox.classList.remove('show'));
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') lightbox.classList.remove('show'); });

  // ===== PLANNING PROGRESS =====
  const progressText=document.getElementById('progressText');
  function updateProgress(){
    const haveDate=true;
    const rsvpDone=people.some(p=>p.status.includes('In'));
    const tasksTotal=tasks.length; const tasksDone=tasks.filter(t=>t.done).length; const taskPct=tasksTotal? (tasksDone/tasksTotal) : 0;
    const packingChecked=Object.values(store.get('garcia.packing', {})).filter(Boolean).length; const packingTotal=Object.keys(store.get('garcia.packing', {})).length||1; const packPct=packingChecked/packingTotal;
    const budgetHas=budget.length>0;
    const score=Math.round(( (haveDate?1:0)*0.2 + (rsvpDone?1:0)*0.2 + taskPct*0.3 + packPct*0.15 + (budgetHas?1:0)*0.15 )*100);
    progressText.textContent=`Planning Progress: ${score}%`;
  }
  updateProgress();
</script>
</body>
</html>
