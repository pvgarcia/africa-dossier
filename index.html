<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Cape Town → Kruger Safari → Victoria Falls | Garcia Gang</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

<!-- Mapbox CSS for the itinerary map. -->
<link href="https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.css" rel="stylesheet">

<style>
  :root{
    --bg:#81572f; --paper:#F2EEE6; --ink:#3E3B34; --ink-soft:#6E6256; --line:#C7BEB0;
    --accent:#7D8B6A; --accent-2:#C6A664; --accent-3:#8DA3A6;
    --brown:#5a3e1b; --brown-dark:#3b2610; --shadow:0 18px 45px rgba(0,0,0,.12);
    --radius:16px; --gap:12px;
    --fs-0: clamp(14px, 3.5vw, 16px);
    --fs-1: clamp(16px, 4.5vw, 18px);
    --fs-2: clamp(18px, 5.5vw, 22px);
    --fs-3: clamp(22px, 7vw, 30px);
    --page-gutter: clamp(14px, 4vw, 22px);
  }
  [data-theme="dark"]{
    --bg:#1f1b16; --paper:#2a251f; --ink:#efe9df; --ink-soft:#c8bcae; --line:#4a4136;
    --accent:#9cc07e; --accent-2:#d8b56a; --accent-3:#88b8bd; --brown:#f7e1c0; --brown-dark:#ffe8c8;
  }

  /* Global */
  *{box-sizing:border-box}
  html, body { min-height:100%; height:auto; overflow-x:hidden; }
  body{
    margin:0;
    font-family: Aptos, "Segoe UI Variable", "Segoe UI", system-ui, -apple-system, Roboto, "Helvetica Neue", Arial, sans-serif;
    background:linear-gradient(180deg, var(--bg), #EFEAE2 50%, var(--bg));
    color:var(--ink);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    font-size: var(--fs-0); line-height:1.45;
  }
  img, table { max-width:100%; }

  /* Content wrapper */
  .wrap{
    max-width:1200px; width:100%;
    margin:0 auto;
    padding:1.25rem var(--page-gutter) 3rem;
    display:grid; gap:1rem;
  }
  @supports (padding: max(0px)){
    .wrap{
      padding-left: calc(var(--page-gutter) + env(safe-area-inset-left));
      padding-right: calc(var(--page-gutter) + env(safe-area-inset-right));
    }
  }

  /* HERO */
  .hero{position:relative; height:62vh; min-height:420px; overflow:hidden; border-bottom:1px solid var(--line); margin-bottom:0; z-index:1;}
  .hero::before{content:""; position:absolute; inset:0; left:50%; transform:translateX(-50%); width:100vw; background:var(--bg); z-index:0;}
  .slides{position:absolute; inset:0; z-index:1;}
  .slide{position:absolute; inset:0; background-size:cover; background-position:center; opacity:0; transition:opacity .9s}
  .slide.active{opacity:1}
  .slide::after{content:""; position:absolute; inset:0; background:linear-gradient(to bottom, rgba(0,0,0,.18), rgba(0,0,0,.10) 40%, rgba(0,0,0,.20));}
  .slide-caption{
    position:absolute; left:16px; right:16px; bottom:18px; z-index:2;
    background:rgba(255,255,255,.72); color:var(--brown);
    padding:12px 14px; border-radius:12px; border:1px solid rgba(0,0,0,.08);
    box-shadow:0 6px 20px rgba(0,0,0,.12);
    max-width:min(820px, calc(100vw - 32px));
  }
  .slide-caption h2{margin:0 0 6px 0; font-family:'Playfair Display',serif; font-weight:700; font-size:clamp(1rem,.7rem + 1.4vw,1.6rem)}
  .slide-caption a{color:var(--brown-dark); text-decoration:none; font-weight:700; border-bottom:1px dashed rgba(58,38,16,.35)}

  /* Dots */
  .carousel-controls{
    position:absolute; left:50%; bottom:8px; transform:translateX(-50%);
    display:flex; gap:.45rem; z-index:3; max-width:100vw; overflow:hidden;
  }
  .dot{width:9px; height:9px; border-radius:50%; background:rgba(255,255,255,.55); border:1px solid rgba(0,0,0,.15); cursor:pointer}
  .dot.active{background:rgba(255,255,255,.95)}

  /* NAV */
  .nav{position:sticky; top:0; z-index:1000; backdrop-filter:saturate(140%) blur(6px); border-bottom:none;}
  .nav::before{
    content:""; position:absolute; inset:0; left:50%; transform:translateX(-50%);
    width:100vw; background:rgba(242,238,230,.86); border-bottom:1px solid var(--line); z-index:-1;
  }
  .nav-inner{max-width:1200px; margin:0 auto; display:flex; gap:.6rem; align-items:center; padding:.6rem 1rem; overflow:auto}
  .nav a{color:var(--ink-soft); text-decoration:none; padding:.4rem .65rem; border-radius:10px; border:1px solid transparent; white-space:nowrap}
  .nav a.active, .nav a:hover{border-color:var(--line); color:var(--ink)}
  .nav .spacer{flex:1}
  .btn{font-family:inherit; font-weight:600; border:1px solid var(--line); background:var(--paper); padding:.5rem .7rem; border-radius:12px; cursor:pointer}

  /* Cards/util */
  .card{background:var(--paper); border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow); padding:clamp(1rem,1.6vw,1.4rem)}
  h1,h2{font-family:'Playfair Display',serif}
  .section-title{margin:.2rem 0 1rem}
  .muted{color:var(--ink-soft)}
  table{border-collapse:collapse; width:100%} th,td{border:1px solid var(--line); padding:.65rem .6rem; text-align:left} th{background:#EEE7DC}
  [data-theme="dark"] th{background:#3a332b}
  .pill{display:inline-block; padding:.28rem .6rem; border:1px solid var(--line); border-radius:999px; background:#fbf9f5; color:var(--ink-soft); font-size:.9rem}
  .soft-card{background:#fbf9f5; border:1px solid var(--line); border-radius:14px; padding:1rem}
  [data-theme="dark"] .soft-card{background:#221e18}
  .mini{margin:.2rem 0 0} .mini li{margin:.25rem 0}

  /* Pair grid */
  .pair-grid{ display:grid; grid-template-columns: 1.2fr .8fr; gap: 1rem; }
  .pair-grid .cell{ display:flex; align-items:stretch; }
  .pair-grid .soft-card{ width:100%; display:flex; flex-direction:column; }

  /* Scroll animations */
  .reveal{ opacity:0; transform:translateY(16px); transition:opacity .7s ease, transform .7s ease; }
  .reveal.show{ opacity:1; transform:none; }
  [data-anim="fade-left"]  { transform:translateX(18px); }
  [data-anim="fade-right"] { transform:translateX(-18px); }
  [data-anim="zoom-in"]    { transform:scale(.96); }
  .reveal{ transition-delay: var(--d, 0s); }

  /* Countdown */
  .countdown{
    display:grid;
    grid-template-columns: repeat(4, minmax(90px,1fr));
    gap:clamp(10px,2vw,16px);
    align-items:stretch;
    width:100%;
  }
  .cd-card{background:linear-gradient(#fff, var(--paper)); border:1px solid var(--line); border-radius:14px; box-shadow:0 6px 20px rgba(0,0,0,.08); padding:12px 10px; text-align:center;}
  .cd-val{font-weight:800; font-size:clamp(26px,8vw,48px); line-height:1; font-variant-numeric: tabular-nums lining-nums; font-feature-settings:"tnum" 1,"lnum" 1; letter-spacing:.02em;}
  .cd-label{display:block; margin-top:6px; color:var(--ink-soft); font-weight:700}
  .cd-bump{animation:cd-bump .22s ease both}
  @keyframes cd-bump{0%{transform:translateY(-6px);opacity:.35}100%{transform:none;opacity:1}}

  /* Widgets layout */
  .widgets{display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:1rem;}
  .w{min-width:0}
  .w.wide{grid-column: 1 / -1}
  .widget-head{display:flex; align-items:center; justify-content:space-between; gap:.6rem; margin-bottom:.6rem; flex-wrap:wrap}
  .widget-head h3{margin:0; font-family:'Playfair Display',serif}

  .input, select, textarea{width:100%; padding:.6rem .7rem; border:1px solid var(--line); border-radius:12px; background:var(--paper); color:var(--ink); font-size:16px}
  .row{display:flex; gap:.6rem; align-items:center; flex-wrap:wrap}
  .row > *{flex:1 1 160px}
  .list{display:grid; gap:.6rem}

  .checklist{display:grid; gap:.5rem}
  .check{display:flex; align-items:center; gap:.6rem}
  .check input[type="checkbox"]{width:18px; height:18px}

  .gallery{display:grid; grid-template-columns:repeat(6,1fr); gap:.5rem}
  .gallery img{width:100%; height:120px; object-fit:cover; border-radius:10px; cursor:pointer; border:1px solid var(--line)}
  .lightbox{position:fixed; inset:0; background:rgba(0,0,0,.7); display:none; align-items:center; justify-content:center; z-index:999}
  .lightbox.show{display:flex}
  .lightbox img{max-width:90vw; max-height:80vh; border-radius:12px; box-shadow:var(--shadow)}

  .table-wrap{overflow:auto; -webkit-overflow-scrolling:touch}
  .table-wrap table{min-width:520px}

  /* Carousels for Accommodation galleries */
  .carousel{ position:relative; }
  .car-track{ display:flex; gap:.5rem; overflow-x:auto; scroll-snap-type:x mandatory; scroll-behavior:smooth; padding-bottom:.25rem; }
  .car-slide{ flex:0 0 100%; scroll-snap-align:center; }
  .carousel img{ width:100%; height:clamp(220px, 36vw, 360px); object-fit:cover; border-radius:12px; border:1px solid var(--line); display:block; }
  .car-btn{ position:absolute; top:50%; transform:translateY(-50%); background:rgba(255,255,255,.85); border:1px solid var(--line); border-radius:999px; width:36px; height:36px; display:grid; place-items:center; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,.12); }
  .car-btn.prev{ left:8px; } .car-btn.next{ right:8px; }
  .car-dots{ display:flex; justify-content:center; gap:.4rem; margin-top:.4rem; }
  .car-dot{ width:8px; height:8px; border-radius:50%; background:#d7d0c6; border:1px solid var(--line); }
  .car-dot[aria-selected="true"]{ background:#fff; }
  [data-theme="dark"] .car-btn{ background:rgba(42,37,31,.8); }

  /* Health visa row */
  #health .visa-row{ grid-column: 1 / -1; display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 1rem; align-items: stretch; margin-top: 1rem; }
  #health .visa-row .soft-card{display:flex; flex-direction:column; height:100%;}

  /* Print */
  @media print{
    .hero,.nav,.to-top,.carousel-controls,.btn,.lightbox{display:none !important}
    .wrap{padding:0}
    .card{box-shadow:none; border:1px solid #ddd}
  }

  /* Responsive */
  @media (max-width: 900px){ .pair-grid{ grid-template-columns: 1fr; } }
  @media (max-width: 640px){
    .hero{height:56vh; min-height:360px}
    .countdown{grid-template-columns: repeat(2, 1fr);} 
    .gallery{grid-template-columns:repeat(3,1fr)}
    #health .visa-row{ grid-template-columns: 1fr; }
  }

  /* Map section styles */
  #map {}
  .map-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 1rem; align-items: stretch; }
  .map-container { height: 420px; width: 100%; border: 1px solid var(--line); border-radius: 14px; overflow: hidden; position: relative; }
  .timeline { border: 1px solid var(--line); border-radius: 14px; background: var(--paper); padding: 1rem; overflow-y: auto; }
  .timeline h4 { margin: 0 0 .6rem; font-family: 'Playfair Display', serif; }
  .timeline-list { list-style: none; padding: 0; margin: 0; }
  .timeline-list li { display: flex; align-items: flex-start; margin-bottom: .8rem; }
  .timeline-list .icon { font-size: 1.3rem; margin-right: .6rem; line-height: 1.2; }
  .timeline-list span { display: block; font-size: var(--fs-1); }

  /* Center column clamp */
  :root { --content-max: 940px; }
  .wrap{ max-width: none; display: grid; gap: 1rem; justify-items: center; padding-inline: var(--page-gutter); }
  .wrap > *{ width: min(100%, var(--content-max)); margin-inline: auto; box-sizing: border-box; }
  .nav-inner{ max-width: var(--content-max); }
  .card, .soft-card, .row, .widgets, .pair-grid, .table-wrap{ min-width: 0; }
  .row > *{ min-width: 0; }
  img, video{ height:auto; display:block; }
  .table-wrap{ max-width:100%; overflow:auto; -webkit-overflow-scrolling: touch; }
  .table-wrap table{ min-width:520px; }
  html, body{ overflow-x:hidden; }
  @supports (padding: max(0px)) {
    .wrap{ padding-left:  calc(var(--page-gutter) + env(safe-area-inset-left)); padding-right: calc(var(--page-gutter) + env(safe-area-inset-right)); }
    .nav-inner{ padding-left:  max(.6rem, env(safe-area-inset-left)); padding-right: max(.6rem, env(safe-area-inset-right)); }
  }
</style>
</head>

<body>

<!-- ===== HERO ===== -->
<header class="hero" aria-label="Destination banners">
  <div class="slides" aria-hidden="true">
    <div class="slide active" style="background-image:url('images/cape-town-africa.jpg')">
      <div class="slide-caption reveal" data-anim="zoom-in" style="--d:.1s">
        <h2>Cape Town — Table Mountain</h2>
        <a href="#packing">Packing Checklist</a>
      </div>
    </div>
    <div class="slide" style="background-image:url('images/kruger-big5.jpg')">
      <div class="slide-caption reveal" data-anim="zoom-in" style="--d:.1s">
        <h2>Kruger National Park — Big Five</h2>
        <a href="#highlights">Explore Highlights</a>
      </div>
    </div>
    <div class="slide" style="background-image:url('images/victoria-falls.jpg')">
      <div class="slide-caption reveal" data-anim="zoom-in" style="--d:.1s">
        <h2>Victoria Falls — The Smoke That Thunders</h2>
        <a href="#itinerary">Daily Itinerary</a>
      </div>
    </div>
  </div>
  <div class="carousel-controls" role="tablist" aria-label="Hero destination slides">
    <button class="dot active" role="tab" aria-selected="true" aria-label="Cape Town"></button>
    <button class="dot" role="tab" aria-selected="false" aria-label="Kruger"></button>
    <button class="dot" role="tab" aria-selected="false" aria-label="Victoria Falls"></button>
  </div>
</header>

<!-- ===== NAV ===== -->
<nav class="nav" aria-label="Section navigation">
  <div class="nav-inner">
    <a href="#glance">At a Glance</a>
    <a href="#highlights">Highlights</a>
    <a href="#itinerary">Itinerary</a>
    <a href="#accommodation">Stays</a>
    <a href="#packing">Packing</a>
    <a href="#health">Health & Visas</a>
    <a href="#map">Map</a>
    <a href="#gallery">Gallery</a>
    <span class="spacer"></span>
    <button id="themeToggle" class="btn" aria-pressed="false" title="Toggle theme">🌓 Theme</button>
    <button id="printBtn" class="btn" title="Print / Save PDF">🖨️ Print</button>
    <button id="shareBtn" class="btn" title="Share">🔗 Share</button>
  </div>
</nav>

<main class="wrap">
  <!-- === AT A GLANCE === -->
  <section id="glance" class="card reveal" data-anim="fade-right" style="--d:.05s" aria-labelledby="glance-title">
    <h2 id="glance-title" class="section-title">At a Glance</h2>
    <p class="muted"><span class="pill reveal" data-anim="zoom-in" style="--d:.12s">9 nights</span> <span class="pill reveal" data-anim="zoom-in" style="--d:.18s">Family Fun</span> <span class="pill reveal" data-anim="zoom-in" style="--d:.24s">Garcia Gang</span></p>
    <div class="row" style="margin:.6rem 0 1rem">
      <div class="muted" style="flex:0 0 auto; min-width:170px">Trip start date</div>
      <div class="pill" style="flex:0 0 auto; padding:.6rem 1rem; font-weight:600">June 1, 2027</div>
    </div>
    <div id="countdown" class="countdown" aria-live="polite" data-start="2027-06-01T00:00:00-06:00"></div>
    <div class="table-wrap reveal" data-anim="fade-right" style="--d:.12s; margin-top:1rem">
      <table>
        <thead><tr><th>Days</th><th>Where</th><th>Key Notes</th></tr></thead>
        <tbody>
          <tr><td>1–3</td><td><a class="maplink" target="_blank" rel="noopener noreferrer" href="https://www.google.com/maps/place/Cape+Town,+South+Africa">Cape Town</a></td><td>Table Mountain, Robben Island, Cape of Good Hope, Penguins</td></tr>
          <tr><td>4–6</td><td><a class="maplink" target="_blank" rel="noopener noreferrer" href="https://www.google.com/maps/place/Kruger+National+Park">Kruger Safari</a></td><td>Big Five game drives, luxury lodge, all meals</td></tr>
          <tr><td>7–8</td><td><a class="maplink" target="_blank" rel="noopener noreferrer" href="https://www.google.com/maps/place/Victoria+Falls">Victoria Falls</a></td><td>Guided Falls tour, Zambezi sunset cruise, helicopter optional</td></tr>
          <tr><td>9</td><td>Return</td><td>Fly to Johannesburg, connect to Denver</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- === HIGHLIGHTS (with “About” blurbs) === -->
  <section id="highlights" class="card" aria-labelledby="highlights-title">
    <h2 id="highlights-title" class="section-title reveal" data-anim="fade-right">Highlights & Why They’re Famous</h2>

    <div id="cape-town-highlights" style="scroll-margin-top:80px; margin-bottom:1.2rem">
      <!-- If you don't want the flag emoji, change the next line to just "Cape Town" -->
      <h3 class="reveal" data-anim="fade-right">🇿🇦 Cape Town</h3>
      <div class="soft-card reveal" data-anim="fade-right" style="--d:.03s">
        <strong>About</strong>
        <p style="margin:.4rem 0 0">
          Backed by iconic Table Mountain and influenced by both the Atlantic and Indian Oceans, Cape Town blends natural drama with a cosmopolitan pulse. 
          Powdery beaches, acclaimed wine routes, and mountain trails frame a city of superb restaurants, shopping, heritage sites, and a vibrant waterfront. 
          Highlights include the Zeitz Museum of Contemporary African Art; Table Mountain’s panoramic views; the African penguin colony at Boulders Beach; 
          the Kirstenbosch Botanical Garden with its treetop canopy walk; and Robben Island, where Nelson Mandela was imprisoned.
        </p>
      </div>
      <div class="pair-grid">
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.06s">
          <strong>Why it’s famous</strong>
          <ul class="mini"><li><em>Table Mountain</em>—one of the New7Wonders of Nature.</li><li><em>Robben Island</em>—a living museum.</li><li><em>Cape Peninsula</em>—Cape of Good Hope & Boulders Beach penguins.</li><li>Food & Wine—world-class and close to the Winelands.</li></ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.12s">
          <strong>Perfect Day (Mini Itinerary)</strong>
          <ul class="mini"><li>Cable car up Table Mountain.</li><li>Bo-Kaap walk & Cape Malay lunch.</li><li>Kirstenbosch or V&A Waterfront.</li><li>Sundowners at Signal Hill.</li></ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.18s">
          <strong>Top 3 Must Dos</strong>
          <ol class="mini"><li>Sunrise/sunset on Table Mountain or Lion’s Head.</li><li>Cape Peninsula circuit.</li><li>Robben Island tour.</li></ol>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.24s">
          <strong>Insider Tips</strong>
          <ul class="mini"><li>Book Robben Island early.</li><li>Use Uber/driver for the Peninsula day.</li></ul>
        </div></div>
      </div>
    </div>

    <hr style="border:none; border-top:1px solid var(--line); margin:1.2rem 0" />

    <div id="kruger-highlights" style="scroll-margin-top:80px; margin-bottom:1.2rem">
      <h3 class="reveal" data-anim="fade-right">🦁 Southern Kruger</h3>
      <div class="soft-card reveal" data-anim="fade-right" style="--d:.03s">
        <strong>About</strong>
        <p style="margin:.4rem 0 0">
          The southern region of South Africa’s Kruger National Park is bordered by the Crocodile River, where crocodiles, playful hippos, and thirsty wildlife gather. 
          The renowned “Southern Circle” offers excellent rhino and lion sightings, with different prides showing varied hunting behaviors. 
          Near Hippo Pools you can view ancient San rock paintings. Expect superb game viewing across classic bushveld and savanna landscapes.
        </p>
      </div>
      <div class="pair-grid">
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.06s">
          <strong>Why it’s famous</strong>
          <ul class="mini"><li>High density Big Five sightings.</li><li>Expert guiding & tracking traditions.</li><li>All-inclusive lodges & stargazing.</li></ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.12s">
          <strong>Perfect Day</strong>
          <ul class="mini"><li>Pre-dawn coffee & morning drive.</li><li>Brunch + siesta/pool.</li><li>High tea & evening drive.</li><li>Dinner by the fire.</li></ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.18s">
          <strong>Top 3 Must Dos</strong>
          <ol class="mini"><li>Sunrise game drive.</li><li>Evening drive + bush dinner.</li><li>Optional guided bush walk.</li></ol>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.24s">
          <strong>Insider Tips</strong>
          <ul class="mini"><li>June marks the start of the dry season—pack layers.</li><li>Confirm airstrip/transfer timings.</li></ul>
        </div></div>
      </div>
    </div>

    <hr style="border:none; border-top:1px solid var(--line); margin:1.2rem 0" />

    <div id="victoria-falls-highlights" style="scroll-margin-top:80px">
      <h3 class="reveal" data-anim="fade-right">🌊 Victoria Falls</h3>
      <div class="soft-card reveal" data-anim="fade-right" style="--d:.03s">
        <strong>About</strong>
        <p style="margin:.4rem 0 0">
          Victoria Falls is one of the world’s most impressive waterfalls, set on the Zambezi River forming the border between Zambia and Zimbabwe. 
          The falls are easily visited from the Zimbabwean side and create the world’s largest curtain of falling water (about 1,708 meters wide). 
          The adjacent town of Victoria Falls makes a great base for exploring. Beyond viewpoints, the area offers adrenaline-filled adventures: 
          scenic helicopter or microlight flights, white-water rafting, bungee jumping, kayaking, and day trips into Botswana’s Chobe National Park.
        </p>
      </div>
      <div class="pair-grid">
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.06s">
          <strong>Why it’s famous</strong>
          <ul class="mini"><li>One of the largest by width × height.</li><li><em>Mosi-oa-Tunya</em>—“The Smoke That Thunders.”</li><li>Adventure hub: cruises, heli flips, Devil’s Pool (seasonal).</li></ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.12s">
          <strong>Perfect Day</strong>
          <ul class="mini"><li>Morning Falls walk (Zimbabwe side).</li><li>Market/café stop.</li><li>Optional helicopter; hotel relax.</li><li>Zambezi sunset cruise.</li></ul>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.18s">
          <strong>Top 3 Must Dos</strong>
          <ol class="mini"><li>Guided Falls walk + raincoat.</li><li>Zambezi sunset cruise.</li><li>“Flight of Angels” scenic flight.</li></ol>
        </div></div>
        <div class="cell"><div class="soft-card reveal" data-anim="fade-right" style="--d:.24s">
          <strong>Insider Tips</strong>
          <ul class="mini"><li>Park fee is per entry—plan a focused visit.</li><li>Zimbabwe for viewpoints; Zambia for Devil’s Pool.</li></ul>
        </div></div>
      </div>
    </div>
  </section>

  <!-- === DAILY ITINERARY === -->
  <section id="itinerary" class="card reveal" data-anim="fade-right" aria-labelledby="itinerary-title">
    <h2 id="itinerary-title" class="section-title">Daily Itinerary</h2>
    <div class="list">
      <article class="soft-card">
        <h4 style="margin:.2rem 0">Day 1 — Arrive Cape Town</h4>
        <p style="margin:.3rem 0 0">Fly to Cape Town (CPT). You’ll be met on arrival and transferred to your hotel for check-in.</p>
      </article>

      <article class="soft-card">
        <h4 style="margin:.2rem 0">Day 2 — Full-Day Cape Peninsula Tour</h4>
        <p style="margin:.3rem 0 0">
          Bring your camera: we’re headed for Cape Point at the southwestern tip of the Cape Peninsula, with some of the most spectacular coastal views in the world. 
          The drive itself is inspiring, passing steep mountains, secluded coves, sweeping beaches, and small fishing communities.
        </p>
        <p>
          We start with a scenic drive along the Atlantic coast, through Sea Point and Camps Bay with its views of the Twelve Apostles. 
          Continue to the fishing village of Hout Bay (optional boat trip to Seal Island, time permitting, for your own account). 
          From here we travel to the Cape Point Nature Reserve (17,300+ acres of indigenous fauna and flora) where wildlife may include baboons, 
          rhebok antelope, Cape mountain zebra, bontebok, and the elusive eland. The reserve is also an important breeding area for tortoises and birdlife.
        </p>
        <p>
          The coastline delivers drama worthy of “Nature’s Greatest Show.” As legend has it, this is where the Atlantic and Indian Oceans meet, 
          and the brisk “Cape Doctor” wind often lives up to its name. Following False Bay, we return via Simon’s Town to visit the penguin colony at Boulders Beach (own account), 
          then pass Fish Hoek, the University of Cape Town, Rhodes Memorial, and Groote Schuur Hospital on the way back to the city.
        </p>
      </article>

      <article class="soft-card">
        <h4 style="margin:.2rem 0">Day 3 — Half-Day Table Mountain & City Tour</h4>
        <p style="margin:.3rem 0 0">
          A city overview past landmarks such as the 17th-century Castle of Good Hope, City Hall, and the Grand Parade. Along Adderley Street, see St. George’s Cathedral, 
          historically associated with Archbishop Desmond Tutu (Nobel Peace Laureate). We pass the Company’s Garden and the colorful Bo-Kaap, 
          originally settled by freed slaves from Southeast Asia and elsewhere in the 18th century.
        </p>
        <p>
          Option to visit a diamond-cutting workshop before ascending Table Mountain by revolving cable car (weather permitting). 
          At the top, explore fynbos like the silver tree and enjoy sweeping views over the city, beaches, Robben Island, and—on clear days—Cape Point.
        </p>
      </article>

      <article class="soft-card">
        <h4 style="margin:.2rem 0">Days 4–6 — Fly to Kruger • Lukimbi Safari Lodge</h4>
        <p style="margin:.3rem 0 0">
          Transfer to Cape Town airport for your flight to the Kruger region, then road transfer to Lukimbi Safari Lodge in southern Kruger National Park. 
          Kruger is home to the Big Five and an extraordinary diversity of wildlife and birds.
        </p>
        <p>
          Lukimbi’s ~15,000-hectare concession is bounded by three river systems, with open grasslands in the north and thicker woodlands and riverine thickets elsewhere—ideal habitat for 
          zebra, wildebeest, and other plains game. White rhino frequent pans and wallows, while the shyer black rhino prefer dense bush. 
          Buffalo herds roam the grasslands; elephants are often seen throughout the concession and in front of the lodge. 
          Lion tracking in open vehicles is a highlight, and leopards are present for the lucky and patient. 
          <em>Included activities:</em> morning & afternoon/evening game drives and guided bush walks with experienced rangers and trackers.
        </p>
      </article>

      <article class="soft-card">
        <h4 style="margin:.2rem 0">Days 7–8 — Fly to Victoria Falls • Old Drift Lodge</h4>
        <p style="margin:.3rem 0 0">
          Transfer to the airport and fly to Victoria Falls (VFA). On arrival, meet your driver for the short transfer to Old Drift Lodge on the Zambezi River.
        </p>
        <p>
          Over two days, enjoy a guided Victoria Falls walking tour (Zimbabwe side) and a Zambezi sunset cruise. 
          Optional extras include the “Flight of Angels” helicopter ride, microlighting, white-water rafting (seasonal), bungee jumping, or a day trip to Chobe National Park in Botswana.
        </p>
      </article>

      <article class="soft-card">
        <h4 style="margin:.2rem 0">Day 9 — Depart</h4>
        <p style="margin:.3rem 0 0">Transfer to Victoria Falls Airport for flights via Johannesburg back to Denver.</p>
      </article>
    </div>
  </section>

  <!-- === ACCOMMODATION (auto-rendered with carousels) === -->
  <section id="accommodation" class="card reveal" data-anim="fade-right" aria-labelledby="accom-title">
    <h2 id="accom-title" class="section-title">Accommodation & Galleries</h2>
    <div id="accomGrid" class="list"></div>
  </section>

  <!-- === PACKING === -->
  <section id="packing" class="card reveal" data-anim="fade-right" aria-labelledby="pack-title">
    <h2 id="pack-title" class="section-title">Packing Checklist</h2>
    <div class="widgets">
      <div class="w"><div class="soft-card"><div class="widget-head"><h3>Essentials</h3></div><div class="checklist" id="packEssentials"></div></div></div>
      <div class="w"><div class="soft-card"><div class="widget-head"><h3>Falls & Water</h3></div><div class="checklist" id="packFalls"></div></div></div>
      <div class="w"><div class="soft-card"><div class="widget-head"><h3>Med/Docs</h3></div><div class="checklist" id="packDocs"></div></div></div>
    </div>
  </section>

  <!-- === HEALTH & VISAS === -->
  <section id="health" class="card reveal" data-anim="fade-right" aria-labelledby="health-title">
    <h2 id="health-title" class="section-title">Health & Entry Info U.S. Citizens</h2>
    <div class="widgets">
      <div class="w wide">
        <div class="soft-card">
          <div class="widget-head"><h3>Vaccines & Health</h3></div>
          <ul class="mini">
            <li><strong>Yellow fever:</strong> <em>Not required</em> when arriving from the U.S. or South Africa. Required only if you arrive from a yellow fever risk country.</li>
            <li><strong>Malaria:</strong> Recommended prophylaxis for <em>Kruger</em> and <em>Victoria Falls</em>.</li>
            <li><strong>Other shots:</strong> Hep A and Typhoid are commonly advised. Keep routine vaccines current.</li>
            <li><strong>Water & food:</strong> Prefer bottled or treated water. Pack oral rehydration and basic meds.</li>
          </ul>
        </div>
      </div>

      <div class="visa-row">
        <div class="soft-card">
          <div class="widget-head"><h3>Visas South Africa</h3></div>
          <ul class="mini">
            <li>U.S. citizens: visa exempt up to 90 days for tourism.</li>
            <li>Passport validity: at least 30 days beyond departure, with 2 blank pages.</li>
          </ul>
        </div>
        <div class="soft-card">
          <div class="widget-head"><h3>Visas Zimbabwe &amp; Zambia</h3></div>
          <ul class="mini">
            <li>Zimbabwe: visa on arrival available in most cases.</li>
            <li>Zambia: if crossing, consider KAZA Univisa (~$50) covering both for 30 days.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- === ITINERARY MAP & TIMELINE === -->
  <section id="map" class="card reveal" data-anim="fade-right" aria-labelledby="map-title">
    <h2 id="map-title" class="section-title">Route Map &amp; Timeline</h2>
    <div class="map-grid">
      <div id="mapContainer" class="map-container" role="application" aria-label="Trip route map"></div>
      <aside id="routeTimeline" class="timeline" aria-label="Travel timeline">
        <h4>Travel Steps</h4>
        <ul class="timeline-list">
          <li><span class="icon">✈️</span><span>Flight: Denver (DEN) → Cape Town (CPT) (~20&nbsp;hrs)</span></li>
          <li><span class="icon">🚐</span><span>Transfer: Cape Town airport → Kensington Place (~20&nbsp;km, ~21&nbsp;min)</span></li>
          <li><span class="icon">🚕</span><span>Transfer: hotel → Cape Town airport (~20&nbsp;km, ~21&nbsp;min)</span></li>
          <li><span class="icon">✈️</span><span>Flight: Cape Town (CPT) → Nelspruit (MQP) (~2&nbsp;hrs)</span></li>
          <li><span class="icon">🚐</span><span>Transfer: Nelspruit → Lukimbi (~88&nbsp;km, ~1&nbsp;hr&nbsp;25&nbsp;min)</span></li>
          <li><span class="icon">✈️</span><span>Flight: Nelspruit/Skukuza → Victoria Falls (VFA) (~2&nbsp;hrs+)</span></li>
          <li><span class="icon">🚐</span><span>Transfer: Victoria Falls → Old Drift Lodge (~7&nbsp;km, ~20&nbsp;min)</span></li>
          <li><span class="icon">🚕</span><span>Transfer: Old Drift Lodge → VFA (~7&nbsp;km, ~20&nbsp;min)</span></li>
          <li><span class="icon">✈️</span><span>Flight: Victoria Falls (VFA) → Denver (DEN) via Johannesburg (~20&nbsp;hrs)</span></li>
        </ul>
      </aside>
    </div>
  </section>

  <!-- === GALLERY === -->
  <section id="gallery" class="card reveal" data-anim="fade-right" aria-labelledby="gallery-title">
    <div class="widget-head"><h2 id="gallery-title" class="section-title">Inspiration Gallery</h2><div class="muted">Tap any image to view larger</div></div>
    <div class="gallery" id="galleryGrid">
      <img src="images/cape-town-africa.jpg" alt="Cape Town" />
      <img src="images/kruger-big5.jpg" alt="Kruger" />
      <img src="images/victoria-falls.jpg" alt="Victoria Falls" />
      <img src="images/bo-kaap.jpg" alt="Bo Kaap" />
      <img src="images/penguins.jpg" alt="Boulders Beach Penguins" />
      <img src="images/zambezi-sunset.jpg" alt="Zambezi Sunset" />
    </div>
    <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Image viewer">
      <img id="lightboxImg" alt="" />
    </div>
  </section>
</main>

<button class="to-top btn" aria-label="Back to top" style="position:fixed; right:12px; bottom:12px; display:none">▲ Top</button>

<!-- Mapbox JS -->
<script src="https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.js"></script>
<script>
  // ===== Utilities =====
  const store = {
    get: (k, fallback) => { try { return JSON.parse(localStorage.getItem(k)) ?? fallback } catch { return fallback } },
    set: (k, v) => localStorage.setItem(k, JSON.stringify(v)),
    del: (k) => localStorage.removeItem(k)
  };
  const K = { theme:'garcia.theme', people:'garcia.people', tasks:'garcia.tasks', budget:'garcia.budget', packing:'garcia.packing' };

  // Flags (safe even if some UI is hidden)
  const FLAGS = 'garcia.flags';
  let flags = store.get(FLAGS, { rsvp:false, tasks:false, pack:false, budget:false, date:false });
  function saveFlags(){ store.set(FLAGS, flags); }

  // Smooth scroll + active link
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', e=>{
      const href=a.getAttribute('href');
      if(href.length>1){ e.preventDefault(); const target=document.querySelector(href); if(target) target.scrollIntoView({behavior:'smooth'}); }
    });
  });
  const sections=[...document.querySelectorAll('main section')];
  const navLinks=[...document.querySelectorAll('.nav a')];
  function onScroll(){
    const y=window.scrollY+90; let id=null;
    sections.forEach(s=>{ const r=s.getBoundingClientRect(); const top=window.scrollY+r.top; if(y>=top && y<top+r.height) id=s.id; });
    navLinks.forEach(l=> l.classList.toggle('active', l.getAttribute('href')==='#'+id));
  }
  document.addEventListener('scroll', onScroll, {passive:true}); onScroll();

  // Back-to-top
  const toTop=document.querySelector('.to-top');
  function toggleTop(){ toTop.style.display = window.scrollY>500 ? 'block' : 'none'; }
  document.addEventListener('scroll', toggleTop, {passive:true});
  toTop.addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

  // ===== HERO CAROUSEL =====
  (function(){
    const slides=[...document.querySelectorAll('.slide')];
    const dots=[...document.querySelectorAll('.dot')];
    if(!slides.length) return;
    let i=0, timer=null;
    function setActive(n){
      slides.forEach((s,idx)=>s.classList.toggle('active', idx===n));
      dots.forEach((d,idx)=>{ d.classList.toggle('active', idx===n); d.setAttribute('aria-selected', idx===n ? 'true' : 'false'); });
      i=n;
    }
    function next(){ setActive((i+1)%slides.length); }
    function start(){ timer=setInterval(next, 5200); }
    function stop(){ if(timer) clearInterval(timer); }
    dots.forEach((d,idx)=> d.addEventListener('click', ()=>{ stop(); setActive(idx); start(); }));
    const hero=document.querySelector('.hero');
    hero.addEventListener('mouseenter', stop); hero.addEventListener('mouseleave', start);
    start();
  })();

  // Scroll reveal
  (function(){
    const items=[...document.querySelectorAll('.reveal')];
    if(!('IntersectionObserver' in window)||!items.length) { items.forEach(el=>el.classList.add('show')); return; }
    const io=new IntersectionObserver((entries,obs)=>{
      entries.forEach(entry=>{ if(entry.isIntersecting){ entry.target.classList.add('show'); obs.unobserve(entry.target);} });
    }, {root:null, rootMargin:'0px 0px -10% 0px', threshold:0.12});
    items.forEach(el=> io.observe(el));
  })();

  // Theme, share, print
  const themeToggle=document.getElementById('themeToggle');
  const shareBtn=document.getElementById('shareBtn');
  const printBtn=document.getElementById('printBtn');
  function applyTheme(t){ document.documentElement.setAttribute('data-theme', t); themeToggle?.setAttribute('aria-pressed', t==='dark'); store.set(K.theme, t); }
  applyTheme(store.get(K.theme,'light'));
  themeToggle?.addEventListener('click', ()=>{ const t=document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark'; applyTheme(t); });
  shareBtn?.addEventListener('click', async ()=>{
    const data={ title:document.title, text:'Garcia Gang trip dossier', url:location.href };
    try{ if(navigator.share){ await navigator.share(data); } else { await navigator.clipboard.writeText(location.href); alert('Link copied to clipboard!'); } }catch(e){ console.warn(e); }
  });
  printBtn?.addEventListener('click', ()=> window.print());

  // ===== Countdown =====
  const cdRoot = document.getElementById('countdown');
  const startISO = cdRoot?.dataset.start || '2027-06-01T00:00:00-06:00';
  if (cdRoot){
    const START = new Date(startISO);
    const unitDefs = [
      {k:'days',    labelWide:'Days',    labelNarrow:'Days'},
      {k:'hours',   labelWide:'Hours',   labelNarrow:'Hours'},
      {k:'minutes', labelWide:'Minutes', labelNarrow:'Min'},
      {k:'seconds', labelWide:'Seconds', labelNarrow:'Sec'}
    ];
    const cdNodes = {};
    unitDefs.forEach(u=>{
      const card = document.createElement('div'); card.className='cd-card'; card.dataset.unit=u.k;
      const val  = document.createElement('span'); val.className='cd-val'; val.textContent='--';
      const lab  = document.createElement('span'); lab.className='cd-label'; lab.textContent=u.labelWide;
      card.append(val, lab); cdRoot.appendChild(card);
      cdNodes[u.k] = { val, lab, def: u };
    });
    function setLabels(){
      const narrow = window.matchMedia('(max-width: 420px)').matches;
      Object.values(cdNodes).forEach(n=>{ n.lab.textContent = narrow ? n.def.labelNarrow : n.def.labelWide; });
    }
    setLabels(); window.addEventListener('resize', setLabels);
    const pad2 = n => String(n).padStart(2,'0');
    function setVal(k, next){
      const el = cdNodes[k].val;
      if(el.textContent !== next){
        el.textContent = next;
        el.classList.remove('cd-bump'); void el.offsetWidth; el.classList.add('cd-bump');
      }
    }
    function render(){
      const now = new Date();
      let ms = Math.max(0, START - now);
      const s = Math.floor(ms/1000);
      const d = Math.floor(s/86400);
      const h = Math.floor((s%86400)/3600);
      const m = Math.floor((s%3600)/60);
      const sec = s%60;
      setVal('days', String(d).padStart(3,'0'));
      setVal('hours', pad2(h));
      setVal('minutes', pad2(m));
      setVal('seconds', pad2(sec));
    }
    let last = 0;
    function loop(ts){ if(ts - last > 250){ render(); last = ts; } requestAnimationFrame(loop); }
    requestAnimationFrame(loop);
  }

  // ===== PACKING =====
  const checklistData={
    packEssentials:['Passport + visas','Credit cards / USD cash','Travel insurance','Universal adapter','Wide brim hat','Sunscreen SPF 30+','Sunglasses','Comfortable shoes'],
    packFalls:['Light rain jacket','Quick dry clothes','Waterproof pouch','Sandals or water shoes','Spare SD cards'],
    packDocs:['Malaria meds','Prescription meds','Copies of docs','Emergency contacts','Lodge confirmations']
  };
  const packingState = store.get(K.packing, {}) || {};
  (function purgeOldSafariKeys(){
    let changed=false;
    Object.keys(packingState).forEach(k=>{ if(k.startsWith('packSafari:')){ delete packingState[k]; changed=true; }});
    if(changed) store.set(K.packing, packingState);
  })();
  function renderChecklist(id, items){
    const box=document.getElementById(id);
    if(!box) return;
    box.innerHTML='';
    items.forEach((label, i)=>{
      const key=id+':'+i;
      const wrap=document.createElement('label'); wrap.className='check';
      wrap.innerHTML=`<input type="checkbox" ${packingState[key]?'checked':''}><span>${label}</span>`;
      const cb=wrap.querySelector('input');
      cb.addEventListener('change',()=>{ packingState[key]=cb.checked; store.set(K.packing, packingState); flags.pack = true; saveFlags(); updateProgress(); });
      box.appendChild(wrap);
    });
  }
  renderChecklist('packEssentials', checklistData.packEssentials);
  renderChecklist('packFalls', checklistData.packFalls);
  renderChecklist('packDocs', checklistData.packDocs);

  // ===== BUDGET (no visible section yet; JS is safe) =====
  const budgetBody=document.getElementById('budgetBody');
  const budgetTotal=document.getElementById('budgetTotal');
  const addBudget=document.getElementById('addBudget');
  const budgetItem=document.getElementById('budgetItem');
  const budgetAmt=document.getElementById('budgetAmt');
  let budget=store.get(K.budget, [
    {item:'Flights per person est.', amount:4850},
    {item:'Robben Island tickets 2', amount:60},
    {item:'Zambezi sunset cruise 2', amount:120}
  ]);
  function renderBudget(){
    if(!budgetBody) return;
    budgetBody.innerHTML='';
    budget.forEach((b,idx)=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td><input class="input" value="${b.item}"></td><td><input class="input" type="number" min="0" step="0.01" value="${b.amount}"></td><td><button class="btn" aria-label="Delete">🗑️</button></td>`;
      const [itemEl, amtEl, del]=tr.querySelectorAll('input,button');
      const sync=()=>{ budget[idx].item=itemEl.value; budget[idx].amount=parseFloat(amtEl.value||0); saveBudget(); flags.budget = true; saveFlags(); updateBudgetTotal(); updateProgress(); };
      itemEl.addEventListener('input', sync); amtEl.addEventListener('input', sync);
      del.addEventListener('click', ()=>{ budget.splice(idx,1); saveBudget(); flags.budget = true; saveFlags(); renderBudget(); updateBudgetTotal(); updateProgress(); });
      budgetBody.appendChild(tr);
    });
    updateBudgetTotal();
  }
  function saveBudget(){ store.set(K.budget, budget); }
  function updateBudgetTotal(){ const total=budget.reduce((s,b)=> s + (parseFloat(b.amount)||0),0); budgetTotal && (budgetTotal.textContent = new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(total)); }
  addBudget?.addEventListener('click', ()=>{ const item=budgetItem.value.trim(); const amt=parseFloat(budgetAmt.value); if(!item||isNaN(amt)) return; budget.push({item, amount:amt}); budgetItem.value=''; budgetAmt.value=''; saveBudget(); flags.budget = true; saveFlags(); renderBudget(); updateBudgetTotal(); updateProgress(); });
  renderBudget();

  // ===== LIGHTBOX =====
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightboxImg');
  document.addEventListener('click', (e)=>{
    const img = e.target.closest('[data-gallery] img, #galleryGrid img');
    if(!img) return;
    lightboxImg.src = img.src;
    lightboxImg.alt = img.alt || '';
    lightbox.classList.add('show');
  });
  lightbox?.addEventListener('click', ()=> lightbox.classList.remove('show'));
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') lightbox?.classList.remove('show'); });

  // ===== PROGRESS (no visible pill; harmless) =====
  const progressText=document.getElementById('progressText');
  function updateProgress(){
    const haveDate   = true;
    const rsvpDone   = (store.get(K.people, [])).some(p => p.status?.includes('In'));
    const tasksNow   = store.get(K.tasks, []);
    const tasksTotal = tasksNow.length;
    const tasksDone  = tasksNow.filter(t => t.done).length;
    const taskPct    = tasksTotal ? (tasksDone / tasksTotal) : 0;
    const packState  = store.get(K.packing, {});
    const packPct    = (Object.values(packState).filter(Boolean).length) / (Object.keys(packState).length || 1);
    const budgetHas  = (store.get(K.budget, [])).length > 0;

    const parts = [];
    if (flags.date)   parts.push({ w:0.20, v: haveDate ? 1 : 0 });
    if (flags.rsvp)   parts.push({ w:0.20, v: rsvpDone ? 1 : 0 });
    if (flags.tasks)  parts.push({ w:0.30, v: taskPct });
    if (flags.pack)   parts.push({ w:0.15, v: packPct });
    if (flags.budget) parts.push({ w:0.15, v: budgetHas ? 1 : 0 });

    if (!parts.length){ progressText && (progressText.textContent = 'Planning Progress: 0%'); return; }
    const wSum = parts.reduce((s,p)=> s + p.w, 0) || 1;
    const score = Math.round(100 * parts.reduce((s,p)=> s + p.w * p.v, 0) / wSum);
    progressText && (progressText.textContent = `Planning Progress: ${score}%`);
  }
  window.resetAllTripData = function(){
    [K.people,K.tasks,K.budget,K.packing,FLAGS,'garcia.version','garcia.tasks.version'].forEach(store.del);
    location.reload();
  };
  updateProgress();

  // ===== ACCOMMODATION GALLERIES with CAROUSELS =====
  const ACCOM = [
    {
      key: 'kensington',
      title: 'Kensington Place',
      where: 'Cape Town • Days 1–4',
      basis: 'B&B — Bed & Breakfast',
      roomsText: '3 × Superior Rooms',
      blurb: 'Design-forward boutique base beneath Table Mountain; easy access to Peninsula, Robben Island, Winelands.',
      rooms:  ['images/kensington/room-1.jpg','images/kensington/room-2.jpg','images/kensington/room-3.jpg'],
      venue:  ['images/kensington/venue-1.jpg','images/kensington/venue-2.jpg','images/kensington/venue-3.jpg']
    },
    {
      key: 'lukimbi',
      title: 'Lukimbi Safari Lodge',
      where: 'Southern Kruger • Days 4–7',
      basis: 'FB+ — Full Board Plus (meals, non-premium drinks, activities & fees)',
      roomsText: '3 × Classic Suites',
      blurb: 'Big Five territory bounded by three river systems; game drives + guided walks.',
      rooms:  ['images/lukimbi/room-1.jpg','images/lukimbi/room-2.jpg','images/lukimbi/room-3.jpg'],
      venue:  ['images/lukimbi/venue-1.jpg','images/lukimbi/venue-2.jpg','images/lukimbi/venue-3.jpg']
    },
    {
      key: 'old-drift',
      title: 'Old Drift Lodge',
      where: 'Victoria Falls (Zimbabwe) • Days 7–9',
      basis: 'FI — Fully Inclusive (meals, local drinks, park fees, activities, laundry)',
      roomsText: '3 × Luxury Tented Suites',
      blurb: 'On the Zambezi a few km above the Falls; included game drive, boat cruise, guided Falls tour.',
      rooms:  ['images/old-drift/room-1.jpg','images/old-drift/room-2.jpg','images/old-drift/room-3.jpg'],
      venue:  ['images/old-drift/venue-1.jpg','images/old-drift/venue-2.jpg','images/old-drift/venue-3.jpg']
    }
  ];

  function imgCarousel(list, cid, label){
    if(!list || !list.length) return '<div class="muted">Add images to /images/... to populate.</div>';
    const id = cid || ('car-' + Math.random().toString(36).slice(2,9));
    const controls = list.length > 1 ? `
      <button class="car-btn prev" aria-label="Previous slide">‹</button>
      <button class="car-btn next" aria-label="Next slide">›</button>
      <div class="car-dots" role="tablist">
        ${list.map((_,i)=>`<button class="car-dot" role="tab" aria-selected="${i===0?'true':'false'}" aria-label="Go to slide ${i+1}" data-idx="${i}"></button>`).join('')}
      </div>` : '';

    return `
      <div class="carousel" id="${id}" data-gallery aria-roledescription="carousel" aria-label="${label||'Image carousel'}">
        <div class="car-track" tabindex="0">
          ${list.map(src => `<div class="car-slide"><img src="${src}" alt="" loading="lazy"></div>`).join('')}
        </div>
        ${controls}
      </div>`;
  }

  function accomCard(a){
    return `
    <article class="soft-card" id="stay-${a.key}" style="margin-bottom:1rem">
      <div class="widget-head">
        <h3 style="margin:0">${a.title}</h3>
        <span class="pill">${a.where}</span>
      </div>
      <p class="muted" style="margin:.3rem 0 .8rem"><strong>${a.basis}</strong> · ${a.roomsText}</p>
      <p style="margin:.2rem 0 1rem">${a.blurb}</p>

      <div class="widgets">
        <div class="w">
          <div class="soft-card">
            <div class="widget-head"><h4 style="margin:0">Rooms</h4></div>
            ${imgCarousel(a.rooms, `${a.key}-rooms`, `${a.title} rooms`)}
          </div>
        </div>
        <div class="w">
          <div class="soft-card">
            <div class="widget-head"><h4 style="margin:0">Venue & Grounds</h4></div>
            ${imgCarousel(a.venue, `${a.key}-venue`, `${a.title} venue`)}
          </div>
        </div>
      </div>
    </article>`;
  }

  (function renderAccommodation(){
    const root = document.getElementById('accomGrid');
    if(!root) return;
    root.innerHTML = ACCOM.map(accomCard).join('');
    initCarousels();
  })();

  function initCarousels(){
    document.querySelectorAll('.carousel').forEach(root=>{
      const track = root.querySelector('.car-track');
      const slides = [...root.querySelectorAll('.car-slide')];
      const prev = root.querySelector('.car-btn.prev');
      const next = root.querySelector('.car-btn.next');
      const dots = [...root.querySelectorAll('.car-dot')];

      if (!track || slides.length <= 1){
        root.querySelector('.car-dots')?.remove();
        prev?.remove(); next?.remove();
        return;
      }

      let index = 0;
      function goTo(i){
        index = Math.max(0, Math.min(slides.length - 1, i));
        track.scrollTo({ left: slides[index].offsetLeft, behavior: 'smooth' });
        dots.forEach((d,di)=> d.setAttribute('aria-selected', di===index ? 'true':'false'));
      }

      prev?.addEventListener('click', ()=> goTo(index - 1));
      next?.addEventListener('click', ()=> goTo(index + 1));
      dots.forEach((d,di)=> d.addEventListener('click', ()=> goTo(di)));

      track.addEventListener('scroll', ()=>{
        const i = Math.round(track.scrollLeft / track.clientWidth);
        if (i !== index){
          index = i;
          dots.forEach((d,di)=> d.setAttribute('aria-selected', di===index ? 'true':'false'));
        }
      }, {passive:true});

      track.addEventListener('keydown', (e)=>{
        if (e.key === 'ArrowRight'){ e.preventDefault(); goTo(index + 1); }
        if (e.key === 'ArrowLeft'){  e.preventDefault(); goTo(index - 1); }
      });

      new ResizeObserver(()=> goTo(index)).observe(track);
    });
  }

  // ===== MAP =====
  (function initTripMap(){
    const mapEl = document.getElementById('mapContainer');
    if (!mapEl || typeof mapboxgl === 'undefined') return;

    // Replace with your own token if needed.
    mapboxgl.accessToken = 'pk.eyJ1IjoicHJpbTMwNyIsImEiOiJjbWYyeWp5ZHgydDFoMmtvbmtndGdoaG5jIn0.t7weB06h0r8E8LXwt0rl_g';

    const routeCoords = [
      [18.6021,  -33.9706],     // Cape Town International Airport (CPT)
      [31.683832, -25.364658],  // Lukimbi Safari Lodge / Nelspruit (MQP)
      [25.791062, -17.875765],  // Old Drift Lodge / Victoria Falls (VFA)
      [28.2500,  -26.1333],     // Johannesburg (JNB)
    ];

    const map = new mapboxgl.Map({
      container: mapEl,
      style: 'mapbox://styles/mapbox/standard',
      center: routeCoords[0],
      zoom: 4
    });

    map.on('load', () => {
      map.addSource('trip-route', {
        type: 'geojson',
        data: { type: 'Feature', properties: {}, geometry: { type: 'LineString', coordinates: routeCoords } }
      });
      map.addLayer({
        id: 'trip-route-line',
        type: 'line',
        source: 'trip-route',
        layout: { 'line-cap': 'round', 'line-join': 'round' },
        paint: { 'line-color': '#C6A664', 'line-width': 4, 'line-opacity': 0.8 }
      });

      const markerNames = ['Cape Town','Lukimbi','Victoria Falls','Johannesburg (JNB)'];
      const markerSubtitles = ['First stop in Africa','Safari stop','Falls stop','Major hub for connections'];
      routeCoords.forEach((lngLat, idx) => {
        const name = markerNames[idx] || `Stop ${idx+1}`;
        const note = markerSubtitles[idx] || '';
        new mapboxgl.Marker({ color: '#5a3e1b' })
          .setLngLat(lngLat)
          .setPopup(new mapboxgl.Popup({ offset: 25 }).setHTML(`<strong>${name}</strong><br>${note}`))
          .addTo(map);
      });

      const bounds = routeCoords.reduce((b, coord) => b.extend(coord), new mapboxgl.LngLatBounds(routeCoords[0], routeCoords[0]));
      map.fitBounds(bounds, { padding: 60 });
    });
  })();
</script>
</body>
</html>
